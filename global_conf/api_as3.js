"use strict";!function(a){function e(a,e){var r=Array.prototype.slice.call(arguments);return new Promise(function(s,t){var p=NIApi.flashViewer[window.apiActionScriptConfig.actionScriptApiMethod](JSON.stringify({method:a+"."+e,args:r}));"SUCCESS"===p.message?s(p.datas):t(p.message)})}var r="";a.Class.CommonApi.prototype.resolveActionScriptCall=function(e){var s=a.Main.xmlManager.get("common-configuration","config","shift");if(s+=1,"event"===e.method){var t=e.args[0],p=t.visiblePages.map(function(a){return parseInt(a.index,10)+s}),n={1:p[0]};p[1]&&(n[2]=p[1]);var i="event",o="",m={};switch(t.type){case"downloadPdf":o="pdfDownload",m[1]=t.params.value;break;case"url":o="externalLink",m[1]=t.params.param;break;case"videoBegin":case"videoResume":o="videoPlay",m[1]=Math.round(t.params.at);break;case"videoPause":o="videoPause",m[1]=Math.round(t.params.at);break;case"videoEnd":o="videoEnd";break;case"inform":"#panel_sendtofriend_validated#"===t.params.param&&(o="shareMail");break;case"twitterShare":case"facebookShare":case"tumblrShare":case"linkedinShare":case"pinterestShare":o="share",m[1]=t.type.replace("Share","");break;case"print":if(o="print","select"===t.params.param)break;var c=t.params.param.split("-"),l=parseInt(c[0])+s,v=parseInt(c[1])+s;m[1]=a.Utils.getPagesBetween(l,v).join(",");break;case"bookmarksAdd":o="bookmark",m[1]=parseInt(t.params.value,10)+s;break;case"bookmarksRemove":o="unbookmark",m[1]=parseInt(t.params.value,10)+s;break;case"nextPage":o="pageNext",m[1]=p[0];break;case"prevPage":o="pagePrev",m[1]=p[0];break;case"popup":o="lightboxOpen",m[1]=a.Utils.resolveVariable(t.params.param);break;case"pageZoomIn":o="zoomIn",m=p[0];break;case"pageZoomOut":o="zoomOut",m=p[0];break;case"fullscreen":o="fullScreenOn";break;default:i="page"}switch(t.type){case"page":if(NIApi.stat.trackEvent("pageView",{1:parseInt(t.params.value,10)+1}),r===p.join("-"))break;o="page",m=n,r=p.join("-");break;case"setState":"thumbnails"===t.params.param&&(o="thumbnails");break;case"toggleActivate":"panel_search"===t.params.param?o="search":"panel_pdf"===t.params.param?o="pdf":"panel_print"===t.params.param?o="print":"panel_summary"===t.params.param?o="contents":"panel_email"===t.params.param?o="share-email":"panel_share"===t.params.param&&(o="share");break;case"search":o="search",m[1]=t.params.value}"fromPage"===t.targetName&&"click"===t.params.event&&(o="link",i="event",m[1]=t.params.type,m[2]=t.params.param),o&&("page"===i?NIApi.stat.trackPage(o,m):"event"===i&&NIApi.stat.trackEvent(o,m))}};var s=window.NIApi.getFunctionList();for(var t in s)for(var p=0;p<s[t].length;p++){var n=s[t][p];NIApi.register("page.getCount",e.bind({},t,n))}}(webpublicationNamespace);