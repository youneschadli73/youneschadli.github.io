function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var a=t[o];if(e.call(r,a,o,t))return a;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var a=t[o];if(e.call(r,a,o,t))return o;o++}return-1},configurable:!0,writable:!0}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,l=o(r.length),c=t(n)?Object(new n(l)):new Array(l),u=0;u<l;)s=r[u],i?c[u]="undefined"==typeof a?i(s,u):i.call(a,s,u):c[u]=s,u+=1;return c.length=l,c}}()),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function n(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return!1;for(var a=0|t,i=Math.max(a>=0?a:o-Math.abs(a),0);i<o;){if(n(r[i],e))return!0;i++}return!1}}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1==t.nodeType);return null}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.lastIndexOf(e,t);return r!==-1&&r===t});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(e){e=e||"",(e instanceof URLSearchParams||e instanceof t)&&(e=e.toString()),this[c]=a(e)}function n(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function o(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p&&(n[e.Symbol.iterator]=function(){return n}),n}function a(e){var t={};if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(var n in e)if(e.hasOwnProperty(n)){var o="string"==typeof e[n]?e[n]:JSON.stringify(e[n]);i(t,n,o)}}else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),s=0;s<a.length;s++){var l=a[s],c=l.indexOf("=");-1<c?i(t,r(l.slice(0,c)),r(l.slice(c+1))):l&&i(t,r(l),"")}}return t}function i(e,t,n){t in e?e[t].push(""+n):e[t]=[""+n]}var s=e.URLSearchParams?e.URLSearchParams:null,l=s&&"a=1"===new s({a:1}).toString(),c="__URLSearchParams__",u=t.prototype,p=!(!e.Symbol||!e.Symbol.iterator);if(!s||!l){u.append=function(e,t){i(this[c],e,t)},u["delete"]=function(e){delete this[c][e]},u.get=function(e){var t=this[c];return e in t?t[e][0]:null},u.getAll=function(e){var t=this[c];return e in t?t[e].slice(0):[]},u.has=function(e){return e in this[c]},u.set=function(e,t){this[c][e]=[""+t]},u.toString=function(){var e,t,r,o,a=this[c],i=[];for(t in a)for(r=n(t),e=0,o=a[t];e<o.length;e++)i.push(r+"="+n(o[e]));return i.join("&")},e.URLSearchParams=s&&!l?new Proxy(s,{construct:function(e,n){return new e(new t(n[0]).toString())}}):t;var f=e.URLSearchParams.prototype;f.polyfill=!0,f.forEach=f.forEach||function(e,t){var n=a(this.toString());Object.getOwnPropertyNames(n).forEach(function(r){n[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},f.sort=f.sort||function(){var e,t,n,r=a(this.toString()),o=[];for(e in r)o.push(e);for(o.sort(),t=0;t<o.length;t++)this["delete"](o[t]);for(t=0;t<o.length;t++){var i=o[t],s=r[i];for(n=0;n<s.length;n++)this.append(i,s[n])}},f.keys=f.keys||function(){var e=[];return this.forEach(function(t,n){e.push([n])}),o(e)},f.values=f.values||function(){var e=[];return this.forEach(function(t){e.push([t])}),o(e)},f.entries=f.entries||function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},p&&(f[e.Symbol.iterator]=f[e.Symbol.iterator]||f.entries)}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0),function(e){function t(e){this.message=e}var n="undefined"!=typeof exports?exports:e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var n,o,a=String(e),i=0,s=r,l="";a.charAt(0|i)||(s="=",i%1);l+=s.charAt(63&n>>8-i%1*8)){if(o=a.charCodeAt(i+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return l}),n.atob||(n.atob=function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,a,i=0,s=0,l="";a=n.charAt(s++);~a&&(o=i%4?64*o+a:a,i++%4)?l+=String.fromCharCode(255&o>>(-2*i&6)):0)a=r.indexOf(a);return l})}(window),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),"children"in document.documentElement||(Object.defineProperty(Element.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)1===t.nodeType&&e.push(t),t=t.nextSibling;return e}}),Object.defineProperty(HTMLElement.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)1===t.nodeType&&e.push(t),t=t.nextSibling;return e}})),"children"in document||Object.defineProperty(Document.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)return 1===t.nodeType&&(e.push(t),t=t.nextSibling),e}}),"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(n){var r=t.className.split(/\s+/),o=r.indexOf(n);e(r,o,n),t.className=r.join(" ")}}var t=this,n={add:e(function(e,t,n){t||e.push(n)}),remove:e(function(e,t){t&&e.splice(t,1)}),toggle:e(function(e,t,n){t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}};return Object.defineProperty(n,"length",{get:function(){return t.className.split(/\s+/).length}}),n}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(t){return d=t,v}}function a(e,t){try{return e(t)}catch(n){return d=n,v}}function i(e,t,n){try{e(t,n)}catch(r){return d=r,v}}function s(e){if("object"!=_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&m(e,this)}function l(e,t,n){return new e.constructor(function(o,a){var i=new s(r);i.then(o,a),c(e,new g(t,n,i))})}function c(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void h(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?u(t.promise,e._12):p(t.promise,e._12));var r=a(n,e._12);r===v?p(t.promise,d):u(t.promise,r)})}function u(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==("undefined"==typeof t?"undefined":_typeof(t))||"function"==typeof t)){var n=o(t);if(n===v)return p(e,d);if(n===e.then&&t instanceof s)return e._37=3,e._12=t,void f(e);if("function"==typeof n)return void m(n.bind(t),e)}e._37=1,e._12=t,f(e)}function p(e,t){e._37=2,e._12=t,f(e)}function f(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function g(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=i(e,function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==v||(n=!0,p(t,d))}var h=e("asap/raw"),d=null,v={};t.exports=s,s._99=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return c(this,new g(e,t,n)),n}},{"asap/raw":4}],2:[function(e,t,n){"use strict";function r(e){var t=new o(o._99);return t._37=1,t._12=e,t}var o=e("./core.js");t.exports=o;var a=r(!0),i=r(!1),s=r(null),l=r(void 0),c=r(0),u=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return l;if(e===!0)return a;if(e===!1)return i;if(0===e)return c;if(""===e)return u;if("object"==("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(i,s){if(s&&("object"==("undefined"==typeof s?"undefined":_typeof(s))||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._37;)s=s._12;return 1===s._37?r(i,s._12):(2===s._37&&n(s._12),void s.then(function(e){r(i,e)},n))}var l=s.then;if("function"==typeof l){var c=new o(l.bind(s));return void c.then(function(e){r(i,e)},n)}}t[i]=s,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,i=0;i<t.length;i++)r(i,t[i])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":1}],3:[function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function o(e){var t;t=s.length?s.pop():new a,t.task=e,i(t)}function a(){this.task=null}var i=e("./raw"),s=[],l=[],c=i.makeRequestCallFromTimer(r);t.exports=o,a.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(l.push(e),c())}finally{this.task=null,s[s.length]=this}}},{"./raw":4}],4:[function(e,t,n){(function(e){"use strict";function n(e){s.length||(i(),l=!0),s[s.length]=e}function r(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>u){for(var t=0,n=s.length-c;n>t;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,l=!1}function o(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function a(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var i,s=[],l=!1,c=0,u=1024,p=e.MutationObserver||e.WebKitMutationObserver;i="function"==typeof p?o(r):a(r),n.requestFlush=i,n.makeRequestCallFromTimer=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,40)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame),"undefined"==typeof webpublicationNamespace&&(window.webpublicationNamespace=window.w={Class:{},Main:{trackerManager:{trackPage:function(){},trackEvent:function(){},initPageTitles:function(){}}},Param:{pathRoot:"publication/"},Utils:{}}),function(e){function t(){for(var e in r){this[e]={};for(var t=0;t<r[e].length;t++)this[e][r[e][t]]=this.defaultCall.bind(this,e,r[e][t])}}var n=[],r={common:["getValue","resolveValues","getDeviceInformation","getVersion","debugMode"],page:["getVisiblePages","getCount","addNewLink","removeLinkByID","open","openNext","openPrevious","shareSocial","openFirst","openLast","clickLink","clickButton","downloadPDF","print"],pagination:["getVerticalArrowPosition","setVerticalArrowsPosition"],configsJson:["getPageData","setPageData"],tab:["open"],navigator:["openUrl"],viewer:["changeMode","getCurrentMode","linkHandler"],content:["getContentURLByID","getContentAssetByID"],menu:["open","close","activate","desactivate"],lightbox:["open","openPopup","close","getOpenList","closeAll"],stat:["trackPage","trackEvent","trackCustomPage","trackCustomEvent"],event:["onPageChange"],styleSheet:[],panels:["share","search","favorites","thumbnail","summary"],gallery:["open","openAssetInApp","doActionInApp"]};window.apiActionScriptConfig={actionScriptApiMethod:"commonApiActionScriptCall",javaScriptNamespace:"webpublicationNamespace",javaScriptApiMethod:"NIApi.call",javaScriptEventMethod:"NIApi.event"},window.setExternalInterfaceIsReady=function(e){return NIApi.flashViewer=document.getElementById("Visio"),window.apiActionScriptInfo=e,window.externalInterfaceIsReady=!0,window.apiActionScriptConfig},window.addEventListener("message",function(e){if("string"==typeof e.data&&0===e.data.indexOf("api/")){for(var t=e.data.replace("api/","").split("/"),n=0;n<t.length;n++)t[n]=decodeURIComponent(t[n]);var r=t.shift().split("."),o=NIApi[r[0]][r[1]].apply(NIApi,t);e.source&&("event"===r[0]?e.source.postMessage({method:r.join("."),arguments:t,result:o},e.origin):o.then(function(n){e.source.postMessage({method:r.join("."),arguments:t,result:n},e.origin)}))}},!1),t.prototype.defaultCall=function(){var e=Array.prototype.slice.call(arguments);return new Promise(function(t,r){n.push({resolve:t,args:e})})},t.prototype.register=function(e,t){var n=e.split(".");this[n[0]][n[1]]=t;for(var r=this.getQueryList(),o=0;o<r.length;o++)r[o].args[0]===n[0]&&r[o].args[1]===n[1]&&(r[o].resolve(t.apply(this,r[o].args.splice(2))),r.splice(o,1))},t.prototype.call=function(t){return"flash"===e.Main.switcher.mode&&("event"===t.method&&"init"===t.args[0].type&&e.require(["../../global_conf/api_as3.js"]).then(function(){t.args[0].type="page";for(var e=0;e<t.args[0].visiblePages.length;e++)t.args[0].params.value=t.args[0].visiblePages[e].value,this.resolveActionScriptCall(t)}.bind(this)),this.resolveActionScriptCall?this.resolveActionScriptCall(t):void 0)},t.prototype.getFunctionList=function(){return r},t.prototype.getQueryList=function(){return n},e.Class.CommonApi=t,window.NIApi=new e.Class.CommonApi}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=!0;e.Utils._assertDebug=function(e){return e===!0?t=!0:e===!1&&(t=!1),t},e.Utils._assert=function(e,n){return e===!1&&t===!0&&console.error(n),e},e.Utils._assertInteger=function(t,n){return e.Utils._assert(t%1===0,n)},e.Utils._assertString=function(t,n){return e.Utils._assert("string"==typeof t,n)},e.Utils._assertBoolean=function(t,n){return e.Utils._assert("boolean"==typeof t,n)},e.Utils._assertJson=function(t,n){if(e.Utils._assert("string"==typeof t,n)){var r=!0;try{JSON.parse(t)}catch(o){r=!1}return e.Utils._assert(r,n)}return!1},e.Utils._assertObject=function(t,n){return e.Utils._assert("object"===("undefined"==typeof t?"undefined":_typeof(t)),n)},e.Utils._assertFunction=function(t,n){return e.Utils._assert("function"==typeof t,n)},e.Utils._assertOneOf=function(t,n,r){return e.Utils._assert(n.indexOf(t)>=0,r)},e.Utils.noop=function(){},e.Utils.callEvent=function(){return"CustomEvent"in window&&"function"==typeof window.CustomEvent?function(e,t,n){var r=new CustomEvent(t,{bubbles:!0,cancelable:!0});r.args=n,r&&e.dispatchEvent(r)}:function(e,t,n){var r;try{r=document.createEvent("HTMLEvents")}catch(o){r=document.createEvent("Event")}r.initEvent(t,!0,!0),r.bubbles=!0,r.args=n,r&&e.dispatchEvent(r)}}(),e.Utils.getPagesBetween=function(e,t){for(var n=[],r=e;r<=t;)n.push(r),r++;return n},e.Utils.getClosestByClass=function(e,t){do if(e.classList&&e.classList.contains(t)===!0)return e;while(null!==(e=e.parentNode));return!1},e.Utils.getClosestByAttribute=function(e,t){do{var n=!!e.attributes&&e.attributes.length;if(n&&n>0&&null!==e.getAttribute(t))return e}while(null!==(e=e.parentNode));return!1},e.Utils.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},e.Utils.promiseXHR=function(e,t,n,r,o){return r=r||null,new Promise(function(a,i){var s=new XMLHttpRequest;if(s.open(e,t,!0),o&&(s.withCredentials=!0),n instanceof Array)for(var l=0;l<n.length;l++)"undefined"!=typeof n[l]&&("resolve"===n[l].key&&(i=a),"overrideMimeType"===n[l].key?s.overrideMimeType(n[l].value):"Authorization"===n[l].key?(s.withCredentials=!0,s.setRequestHeader(n[l].key,"Basic "+btoa(n[l].username+":"+n[l].password))):s.setRequestHeader(n[l].key,n[l].value));s.onreadystatechange=function(){4===s.readyState&&(404===s.status?i(s):a(s))};try{s.send(r)}catch(c){i(s)}})},e.Utils.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+o},e.Utils.resolveVariable=function(t){if(t&&"string"==typeof t){var n,r="",o="",a=t.match(/\$([A-Za-z0-9-_]+)\$/gi);if(a)for(n=0;n<a.length;n++)r=a[n].substring(1,a[n].length-1),o=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(o=e.Main.xmlManager.getVariable(r)),"undefined"!=typeof o&&(t=t.replace(a[n],o));if(a=t.match(/\$\{\S+?\}/gi))for(n=0;n<a.length;n++)r=a[n].substring(2,a[n].length-1),o=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(o=e.Main.xmlManager.getVariable(r)),"undefined"!=typeof o&&(t=t.replace(a[n],o));return t}if(t instanceof Array)return t.map(e.Utils.resolveVariable);if("object"===("undefined"==typeof t?"undefined":_typeof(t))){for(var i in t)t[i]=e.Utils.resolveVariable(t[i]);return t}return t},NIApi.register("common.resolveValues",function(t){return Promise.resolve(e.Utils.resolveVariable(t))}),NIApi.register("common.locale",function(t){return e.Main.xmlManager.get("locale",t)}),NIApi.register("common.getValue",function(t){return Promise.resolve(e.Main.xmlManager.getVariable(t))}),e.Utils.resolveTranslation=function(t){if(t&&"string"==typeof t){var n=t.match(/\#([A-Za-z0-9-_]+)\#/gi);if(n)for(var r="",o="",a=0;a<n.length;a++)r=n[a].substring(1,n[a].length-1),o=e.Main.xmlManager.get("locale",r),o&&(t=t.replace(n[a],o));return t}return""},e.Utils.resolveString=function(t){for(var n="",r=t;n!==r;)n=e.Utils.resolveTranslation(e.Utils.resolveVariable(r)),r=e.Utils.resolveTranslation(e.Utils.resolveVariable(n));return n},e.Utils.getFunctionName=function(e){var t="function"==typeof e,n=t&&(e.name&&["",e.name]||e.toString().match(/function ([^\(]+)/));return!t&&"not a function"||n&&n[1]||"anonymous"},e.Utils.hexToRgb=function(){function e(e){return parseInt(e.substring(0,2),16)}function t(e){return parseInt(e.substring(2,4),16)}function n(e){return parseInt(e.substring(4,6),16)}function r(e){return"#"===e.charAt(0)?e.substring(1):e}return function(o,a){o=r(o);var i=e(o),s=t(o),l=n(o);return"undefined"!=typeof a?(a=parseFloat(a),"rgba("+i+","+s+","+l+","+a+")"):"rgb("+i+","+s+","+l+")"}}(),e.Utils.whitelistParameters=function(t){var n=[e.Main.xmlManager.get("config","transferringVariable"),"bookmarks","bookmark","gallery","initState","lng","page","startPage","transferring","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],r=document.createElement("a");r.href=t;var o=[],a=r.search.replace("?","");a=a.split("&");for(var i=0;i<a.length;i++){var s=a[i].split("=");n.indexOf(s[0])>=0&&o.push(a[i])}return r.search="?"+o.join("&"),r.href},e.Utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.Utils.scrollIntoView=function(){window.document.body.scrollIntoView(!0)},e.Utils.scrollIntoViewAsyn=function(){setTimeout(e.Utils.scrollIntoView,16),setTimeout(e.Utils.scrollIntoView,500),setTimeout(e.Utils.scrollIntoView,1e3)},e.Utils.supportsPassive=function(){var e;return function(){if("boolean"==typeof e)return e;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t)}catch(n){}return e}}()}(webpublicationNamespace),function(e){function t(t){return i.hasOwnProperty(t)===!1&&(i[t]=new Promise(function(n,r){a(t).then(function(t){e.Utils.promiseXHR("GET",t).then(function(r){n(!0),404!==r.status&&e.Main.cssManager.addLoaded([{url:t,text:r.responseText}])})["catch"](n)})})),i[t]}function n(e){return i.hasOwnProperty(e)===!1&&(i[e]=new Promise(function(t,n){a(e).then(function(e){var n=document.createElement("script");n.src=e,n.onload=t,n.onerror=t,document.head.appendChild(n)})})),i[e]}function r(t){return a(t).then(function(t){return e.Utils.promiseXHR("GET",t)})}var o={css:{},js:{},template:{}},a=function(){function t(e){var t=JSON.parse(e.responseText);for(var n in t.template)t.template[n]&&(o.template["publication/mobile/template/"+n+".html"]=t.template[n]);for(n in t.css)t.css[n]&&(o.css["css/"+n+".css"]=t.css[n]);for(n in t.js)t.js[n]&&(o.js["js/"+n+".js"]=t.js[n]);return Promise.resolve(o)}var n=null;return function(r){if(null===n){var a=e.Main.xmlManager.get("common-ui","assets","custom_template");n=a?e.Utils.promiseXHR("GET",e.Utils.resolveVariable("$template$template.json")).then(t)["catch"](function(){return Promise.resolve({css:{},js:{},template:{}})}):Promise.resolve({css:{},js:{},template:{}})}return n.then(function(){return r=r.replace(/^\.\//,""),r.indexOf(".css")!==-1?r=o.css[r]?o.css[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:r.indexOf(".js")!==-1?r=o.js[r]?o.js[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:r.indexOf(".html")!==-1&&o.template[r]&&(r=o.template[r]),r=e.Utils.resolveVariable(r),Promise.resolve(r)})}}(),i={};e.require=function(e){if("string"==typeof e)return r(e);for(var o=[],a=0,i=e.length;a<i;a++)0===e[a].indexOf("css/")?o.push(t(e[a]+".css")):0===e[a].indexOf("js/")?o.push(n(e[a]+".js")):e[a].indexOf(".js")!==-1?o.push(n(e[a])):e[a].indexOf(".css")!==-1&&o.push(t(e[a]));return Promise.all(o)},e.addCustomTemplate=function(e,t,n){o[e][t]=n}}(webpublicationNamespace),function(e){"use strict";function t(){this.init()}var n={};t.prototype.contains=function(e){return"undefined"!=typeof n[e]},t.prototype["delete"]=function(e){var t,n=!1,r=new RegExp("&?"+e+"=[^&]+"),o=location.search.match(r);o&&o[0]&&(t=location.href.replace(o[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("?")>-1&&""===location.search&&(t=location.href.replace("?",""),history.replaceState(null,null,t)));var a=location.hash.match(r);return a&&a[0]&&(t=location.href.replace(a[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("#")>-1&&("#"===location.hash||""===location.hash)&&(t=location.href.replace("#",""),history.replaceState(null,null,t))),n},t.prototype.forEach=function(e,t){for(var r in n)e.call(t||window,n[r],r,n)},t.prototype.get=function(e){return n[e]},t.prototype.getAll=function(){return n},t.prototype.init=function(e){n={};var t="",r="",o="",a="";if(0===location.search.indexOf("?")&&(t=location.search.slice(1)),t.length>0){o=t.split("&");for(var i=0;i<o.length;i++)o[i].indexOf("=")>0?(a=o[i].split("="),n[a[0]]=a[1]):n[o[i]]=!0}if(r="",0===location.hash.indexOf("#")&&(r=location.hash.slice(1)),r.length>0){o=r.split("&");for(var s=0;s<o.length;s++)o[s].indexOf("=")>0?(a=o[s].split("="),n[a[0]]=a[1]):n[o[s]]=!0}},t.prototype.set=function(e,t){var r=!1,o=location.hash.replace("#",""),a=o?o.split("&"):[],i=0;if(null===t){for(i=0;i<a.length;i++)a[i].split("=")[0]===e&&(a[i]=void 0,r=!0);delete n[e]}else{for(i=0;i<a.length;i++)a[i].split("=")[0]===e&&(a[i]=e+"="+t,r=!0);n[e]=t}r===!1&&a.push(e+"="+t),location.hash="#"+a.filter(function(e){return"undefined"!=typeof e}).join("&")},e.Class.UrlManager=t}(webpublicationNamespace),function(e){"use strict";var t=e.Class.CommonApi;t.prototype.dispatchEvent=function(t,n){"flash"===e.Main.switcher.mode?this.flashViewer[window.apiActionScriptConfig.javaScriptEventMethod](JSON.stringify({event:"lightbox.close",args:[{}]})):"html"===e.Main.switcher.mode&&this.javascriptviewer.dispatchEvent(t,n)},t.prototype.actionScriptCall=function(t){var n=window.apiActionScriptConfig.actionScriptApiMethod,r="[actionScriptCall]";return!!(e.Utils._assertObject(t,r+" The first argument must be an object")&&e.Utils._assertString(t.method,r+" The method key in arguments must be a string")&&e.Utils._assertFunction(this.flashViewer[n],r+" The method key in arguments must be a function"))&&JSON.parse(this.flashViewer[n](JSON.stringify(t)))},t.prototype.registerJavaScript=t.prototype.register,t.prototype.registerActionScript=t.prototype.register,e.Class.CommonApi=t}(webpublicationNamespace),function(e){"use strict";function t(){this.os={name:a,version:a},this.device={type:a},this.browser={name:a,version:a},f.call(this),this.device.type=this.getResolvedDeviceType(),u[this.os.name]&&(this.os.version=u[this.os.name]()),p[this.browser.name]&&(this.browser.version=p[this.browser.name]())}var n={IOS:"iOS",ANDROID:"android",BLACKBERRY:"blackberry",FIREFOX:"firefox",TIZEN:"tizen",WINDOWS:"windows",MAC:"mac",LINUX:"linux",CHROME_OS:"cros"},r={SAFARI:"safari",CHROME:"chrome",FIREFOX:"firefox",ANDROID:"android",TIZEN:"tizen",BLACKBERRY:"blackberry",IE:"ie",EDGE:"edge"},o={PHABLET:"phablet",TABLET:"tab",PHONE:"phone",DESKTOP:"desktop"},a="unknown",i=["android","blackberry","chrome","edge","firefox","ipad","iphone","linux","mac os","mobile","phone","safari","tablet","tizen","touch","trident","windows","cros"],s={},l=navigator.userAgent.toLowerCase();for(var c in i)s[i[c]]=l.indexOf(i[c])!==-1;var u={iOS:function(){return(/CPU.*OS ([0-9]{1,5})/i.exec(navigator.userAgent)||["",a])[1]},android:function(){return(/Android ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1]},windows:function(){var e=(/Windows Phone ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1];if(e!==a)return e;var t=(/Windows NT ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1];switch(t){case"10.0":return"10";case"6.3":return"8.1";case"6.2":return"8";case"6.1":return"7";case"6.0":return"Vista";case"5.2":case"5.1":return"XP";case"5.0":return"2000";default:return a}},mac:function(){var e=/Mac OS.* ([0-9_]+)/i.exec(navigator.userAgent);return e[1]?e[1].split("_").slice(0,2).join("."):a}},p={chrome:function(){return parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1])},firefox:function(){return parseInt((/Firefox\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1])},ie:function(){var e=(/rv\:([0-9]+)/.exec(navigator.userAgent)||["",a])[1];return e===a&&(e=(/IEMobile\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1]),e===a&&(e=(/MSIE\s([0-9]+)/.exec(navigator.userAgent)||["",a])[1]),parseInt(e,10)},edge:function(){var e=(/Edge\/([0-9]+)\./.exec(navigator.userAgent)||["",a])[1];return parseInt(e,10)},safari:function(){return parseFloat((/Version\/([0-9]+\.[0-9]+)/.exec(navigator.userAgent)||["",a])[1])}},f=function(){var e=Math.max(document.body.getBoundingClientRect().width,document.body.getBoundingClientRect().height);if((s.iphone||s.ipad)&&!s.trident)return this.os.name=n.IOS,this.device.type=o.TABLET,this.browser.name=r.SAFARI,void(s.iphone?this.device.type=o.PHONE:e<750&&(this.device.type=o.PHABLET));if(s["mac os"]&&!s.trident){this.os.name=n.MAC,this.device.type=o.DESKTOP;var t=navigator.maxTouchPoints>0;return t&&(this.os.name=n.IOS,this.device.type=o.PHONE,e>750&&(this.device.type=o.TABLET)),void(s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.SAFARI)}return s.windows&&(this.os.name=n.WINDOWS,s.edge?(this.os.name=n.WINDOWS,this.browser.name=r.EDGE):s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.IE,s.mobile||s.phone?this.device.type=o.PHONE:this.device.type=o.DESKTOP),s.linux&&(this.os.name=n.LINUX,s.chrome?this.browser.name=r.CHROME:s.firefox&&(this.browser.name=r.FIREFOX),this.device.type=o.DESKTOP),s.tizen?(this.os.name=n.TIZEN,void(this.browser.name=r.TIZEN)):s.blackberry?(this.os.name=n.BLACKBERRY,void(this.browser.name=r.BLACKBERRY)):(s.android&&!s.trident?(this.os.name=n.ANDROID,this.device.type=o.TABLET,s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.ANDROID):s.firefox&&(s.mobile||s.tablet)&&(this.os.name=n.FIREFOX,this.browser.name=r.FIREFOX),s.mobile?this.device.type=o.PHONE:this.device.type!==o.DESKTOP&&(e/window.devicePixelRatio<750?this.device.type=o.PHABLET:e/window.devicePixelRatio<=1280?this.device.type=o.TABLET:this.device.type=o.DESKTOP),s.cros?(this.os.name=n.CHROME_OS,void(this.browser.name=r.CHROME)):void 0)};t.prototype.getResolvedDeviceType=function(){var e=new URLSearchParams(window.location.search),t=e.get("deviceType");return t?t:this.device.type},t.prototype.isDesktop=function(){return this.device.type===o.DESKTOP},t.prototype.isPhone=function(){return this.device.type===o.PHONE;
},t.prototype.isTablet=function(){return this.device.type===o.TABLET||this.device.type===o.PHABLET},t.prototype.isPhablet=function(){return this.device.type===o.PHABLET},t.prototype.isUnknown=function(){return this.device.type===a},t.prototype.isIE=function(){return this.browser.name===r.IE},t.prototype.OS=n,t.prototype.BROWSER=r,t.prototype.FORMAT=o,t.prototype.UNKNOWN=a,e.Class.UserAgentManager=t}(webpublicationNamespace),function(e){"use strict";function t(){}var n={},r={_comments:function(e){return e.replace(/<\!\-\-[^>]*\-\-\>/gim,"")},_default:function(e){return e.replace(/\{\{default\((.*?),\s*(.*?)\)\}\}/g,function(e,t,n){return"<% if ( typeof( "+t+' ) === "undefined" ) { var '+t+" = "+n+" } %>"})},_exists:function(e){return e.replace(/\{\{\s*exists\s*(.*?)\s*\}\}/g,function(e,t){return"<% if ( typeof( "+t+') !== "undefined" ) {  %>'}).replace(/\{\{\s*otherwise\s*\}\}/g,function(){return"<% } else { %>"}).replace(/\{\{\s*\/exists\s*\}\}/g,"<% } %>")},_if:function(e){return e.replace(/\{\{\s*(else|if)(.*?)\s*\}\}/g,function(e,t,n){return"if"===t?"<% if("+n+") { %>":""===n&&"else"===t?"<% } else { %>":"else"===t?"<% } else if("+n+") { %>":void 0}).replace(/\{\{\s*\/if\s*\}\}/g,"<% } %>")},_each:function(e){return e.replace(/\{\{\s*each\((.*?),(.*?)\)\s*(.*?)\s*\}\}/g,function(e,t,n,r){return"<% for(var "+t+" in "+r+") { if("+r+" instanceof Array) {"+t+" = parseInt("+t+", 10);} var "+n+" = "+r+"["+t+"]; %>"}).replace(/\{\{\s*\/each\s*\}\}/g,"<% } %>")},_webpublicationNamespace:function(e){return e.replace(/([^a-zA-Z0-9])w\./gi,"$1webpublicationNamespace.")},_ie:function(e){return e.replace(/([0-9a-z_]+)Plugin/gi,"obj.$1Plugin")},_var:function(e){return e=e.replace(/(\r\n|\n|\r)/gm," "),e.replace(/\{\{(.*?)\}\}/g,"<%=$1%>").replace(/\s+/g," ")}},o={},a={},i={icons:function(t){for(var n=t.querySelectorAll(".svgicon svg"),r=n.length;r--;)n[r].getAttribute("data-color")&&e.Utils.svgIcon(n[r],{icon:n[r].getAttribute("data-icon"),color:n[r].getAttribute("data-color")})},focusable:function(){var t=function(t){var n=t.target,r=e.Utils.getClosestByClass(n,"focusable");r!==!1&&(r.classList.add("focused"),window.setTimeout(function(){r.classList.remove("focused")},300))};return function(e){for(var n=e.querySelectorAll(".focusable"),r=n.length;r--;)n[r].addEventListener("vclick",t)}}(),template:function(){var t=function(t,n,r){return c(e.Utils.getTemplate("component",n),r).then(function(e){for(var o=e.length,i=t.parentNode,s=0;s<o;s++)a[n]&&a[n].call(e[s],r,n),null!==i&&e[s]?i.insertBefore(e[s],t):e[s]&&(t=e[s]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[s]),10);null!==i&&i.removeChild(t)})};return function(n){for(var r=n.querySelectorAll(".templateManagerPlaceholder"),o=[],a=0;a<r.length;a++)if(null!==r[a].parentNode){var i=r[a].getAttribute("data-template"),s=JSON.parse(r[a].getAttribute("data-data")),l=e.require(["js/component/"+i,"css/component/"+i]).then(t.bind(this,r[a],i,s));o.push(l)}return Promise.all(o)}}()},s=function(e,t){for(var n=[],r=0,o=function(){if(--r<=0)for(var e=0;e<n.length;e++){var o=document.createElement("script");o.type="text/javascript",o.innerHTML=n[e],t.appendChild(o)}},a=function(e){if(e.src){var a=document.createElement("script");a.type="text/javascript",a.src=e.src,a.onload=o,r++,t.appendChild(a)}else n.push(e.innerHTML);e.outerHTML=""},i=function(e){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.href=e.href,t.appendChild(n),e.outerHTML=""},s=e.length,l=0;l<s;l++){if(e[l].getElementsByTagName){for(var c=e[l].getElementsByTagName("script"),u=0;u<c.length;u++)a(c[u]);"SCRIPT"===e[l].tagName&&a(e[l]);for(var p=e[l].getElementsByTagName("link"),f=0;f<p.length;f++)i(p[f]);"LINK"===e[l].tagName&&i(e[l])}t.appendChild(e[l]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[l]),10)}return e},l=function(e){for(var t in r)e=r[t](e);return new Function("obj","var w=webpublicationNamespace;var p=[];with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');")},c=function(t,n,r){n=n||{},"String"===e.Utils.getFunctionName(n.constructor)&&(n={content:n});for(var a in o)n[a+"Plugin"]=o[a];return Promise.resolve(u(t)).then(p.bind(this,t,n,r))},u=function(t){return"undefined"==typeof n[t]&&(n[t]=e.require(t).then(function(e){return Promise.resolve(l(e.responseText))})),n[t]},p=function(e,t,n,r){var o="div";t&&t.useTr===!0&&(o="table");var a=document.createElement(o);a.id="tmplWrapper",a.innerHTML=r(t),"table"===o&&(a=a.getElementsByTagName("tr")[0].parentNode);var s=[];if(a.querySelectorAll)for(var l in i)s.push(i[l](a,n));return Promise.all(s).then(function(){var t=[],n=a.childNodes.length,r=!1;for(e.indexOf("component")!==-1&&(r=e.replace(".html","").split("/"),r=r[r.length-1]);n--;){var o=a.childNodes[n];3===o.nodeType&&""===o.textContent.trim()||t.unshift(o)}return Promise.resolve(t)})},f=function(e,t){for(var n=e.length;n--;)t.parentNode.insertBefore(e[n],t),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},g=function(e,t){for(var n=e.length;n--;)t.insertBefore(e[n],t.firstChild),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},m=function(e,t){var n=null;n=t instanceof Node?t:t[0];for(var r=0;r<e.length;r++)n.parentNode.insertBefore(e[r],n),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[r]),10);if(t instanceof Node)t.parentNode.removeChild(t);else for(var o=0;o<t.length;o++)t[o].parentNode.removeChild(t[o]);return e};t.addCallback=function(e,t){i[e]=t},t.addComponent=function(e,t){a[e]=t},t.addPlugin=function(e,t){o[e]=t},t.getPlugin=function(){return o},t.getComponentScript=function(){return a},t.getCache=function(){return n},t.prototype.load=function(t,n,r){return c(t,r,n).then(function(t){return e.Utils.empty(n),s(t,n)})},t.prototype.loadAppend=function(e,t,n){return c(e,n,t).then(function(e){return s(e,t)})},t.prototype.loadPrepend=function(e,t,n){return c(e,n,t).then(function(e){return g(e,t)})},t.prototype.loadBefore=function(e,t,n){return c(e,n,t).then(function(e){return f(e,t)})},t.prototype.loadReplace=function(e,t,n){return c(e,n,t).then(function(e){return m(e,t)})},e.Class.TemplateManager=t,e.Class.TemplateManager.addPlugin("escape",function(e){if(e)return e.replace("'","\\'")}),e.Class.TemplateManager.addPlugin("locale",function(t){return e.Utils.prodTools.getWordLangueByIndex(t)}),e.Class.TemplateManager.addPlugin("icon",function(t,n,r,o){var a=document.createElement("div");if(a.className="svgicon-new svgicon-"+t+" "+n,o)for(var i in o)a.setAttribute(i,o[i]);return e.Utils.svgIcon(a,{icon:t,color:r||null}),a.outerHTML}),e.Class.TemplateManager.addPlugin("encode",function(e){if(isNaN(e))return encodeURIComponent(e)}),e.Class.TemplateManager.addPlugin("template",function(e,t){var n="div";return t&&t.useTr===!0&&(n="tr"),t=t?JSON.stringify(t).replace(/"/g,"&quot;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;"):"{}","<"+n+' class="templateManagerPlaceholder" data-template="'+e+'" data-data="'+t+'"></'+n+">"}),e.Class.TemplateManager.addPlugin("hexToRgba",function(t,n){return n=parseFloat(n)/100,e.Utils.hexToRgb(t,n)})}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(){}var n,r,o=[];t.prototype.execute=function(t,o){if(r=o,n=e.Main.xmlManager.getVariable("transferring"),"undefined"==typeof n)return Promise.resolve();var a=new e.Class.QueryManager,i=t.querySelector("proxy");return i?a.execute(i).then(function(e){return r.transferring=e,Promise.resolve(e)}).then(a.execute.bind({},t)).then(this.parseData):a.execute(t).then(this.parseData)},t.prototype.parseData=function(){function e(t,n){for(var a in n)"object"===_typeof(n[a])&&n[a]instanceof Array==!1?e(t+"_"+a,n[a]):(r[t+"_"+a]=n[a],o.push(t+"_"+a))}return function(t){return e("transferring",t),r.transferring=n,Promise.resolve()}}(),t.prototype.remove=function(){localStorage&&localStorage.removeItem("transferring");for(var t in r)0===t.indexOf("transferring")&&delete r[t];return e.Main.urlManager["delete"]("transferring")},e.Class.TransferringManager=t}(webpublicationNamespace),function(e){"use strict";function t(e,t){for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[],o=[],a=!1,i=0,s=null;null!==(s=n.exec(e));){var l=s[1];l.length&&l!==t&&(r.push({}),a=!0,i=0);var c;c=s[2]?s[2].replace(new RegExp('""',"g"),'"'):s[3],a===!1?o.push(c):r[r.length-1][o[i]]=c,i++}return r}function n(n,r){var o=t(r.trim(),n.getAttribute("separator")||","),a=n.querySelector("matchingProp");if(a){var i=e.Main.xmlManager.getVariable("transferring")||e.Main.urlManager.get("transferring");return o.filter(function(e){return e[a.getAttribute("id")]===i})[0]}return o}function r(e,t){var n=JSON.parse(t),r=e.querySelector("matchingProp");return r?n[r.getAttribute("id")]:n}function o(){}o.prototype.execute=function(t){var o,a=Array.prototype.filter.call(t.childNodes,function(e){return"dataset"===e.nodeName})[0],i=Array.prototype.filter.call(t.childNodes,function(e){return"url"===e.nodeName})[0],s=Array.prototype.filter.call(t.childNodes,function(e){return"asset"===e.nodeName})[0],l=a.getAttribute("type");i?o=i.textContent:s&&(o=e.Main.xmlManager.get("common-ui","assets",s.getAttribute("id")),o=o.hasOwnProperty("url")?o.url:o);var c=[];return i&&i.hasAttribute&&i.hasAttribute("username")&&i.hasAttribute("password")&&c.push({key:"Authorization",username:i.getAttribute("username"),password:i.getAttribute("password")}),e.Utils.promiseXHR("GET",e.Utils.resolveVariable(o),c).then(function(e){var t=null;return"JSON"===l?t=r(a,e.responseText):"CSV"===l&&(t=n(a,e.responseText)),Promise.resolve(t)})},e.Class.QueryManager=o}(webpublicationNamespace),function(e){"use strict";function t(){}var n={},r={},o={pubinfo:{},contents:{},template:{},locale:{},"common-ui":{},"common-configuration":{},summary:{},statistics:{get:function(){return null}},comboPages:{scrollablePages:[],forcedSinglePages:[],get:function(){return[]}}},a={pubinfo:function(e){"https:"===location.protocol&&(n.managerHost=(n.managerHost||n.manager_host).replace("http:","https:").replace(":80",":443")),o.pubinfo.template=null,o.pubinfo.contents=null,o.pubinfo.statistics="publication/contents/statistics.xml";for(var t=e.documentElement.childNodes,r=0;r<t.length;r++)"template"===t[r].tagName?o.pubinfo.template=this.resolver(t[r].getAttribute("url")):"contents"===t[r].tagName?o.pubinfo.contents=this.resolver(t[r].getAttribute("url")):"statistics"===t[r].tagName&&(o.pubinfo.statistics=this.resolver(t[r].getAttribute("url")));n.root="publication/",o.pubinfo.get=function(e){return o.pubinfo[e]}},contents:function i(t){var i=t.querySelector("contents");o.contents.config={pages_nr:parseInt(i.getAttribute("pages_nr")),shift:parseInt(i.getAttribute("shift")),prefix:i.getAttribute("prefix"),padding:parseInt(i.getAttribute("padding"))},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))}),o.contents.content={};for(var n=t.querySelectorAll("contents > content"),r=0;r<n.length;r++){var a=n[r].getAttribute("id").toLowerCase();o.contents.content[a]={id:a,width:parseInt(n[r].getAttribute("width")),height:parseInt(n[r].getAttribute("height")),path:this.resolver(n[r].getAttribute("path")),type:n[r].getAttribute("type"),ext:n[r].getAttribute("ext"),prefix:n[r].getAttribute("prefix")}}o.contents.get=function(e,t){if("undefined"!=typeof t)return o.contents.content[e][t];switch("thumbnails"===e&&o.contents.content.thumbnails_xdpi&&window.devicePixelRatio>=2&&(e="thumbnailsxdpi"),e){case"thumbnails_xdpi":e="thumbnailsxdpi";break;case"zoom_hd":e="zoomhd";break;case"full_pdf":e="fullPdf";break;default:e=e}if("undefined"==typeof o.contents.content[e])return null;var n="";return o.contents.content[e].prefix&&(n+=o.contents.content[e].prefix),o.contents.content[e].ext&&(n+="."+o.contents.content[e].ext),o.contents.content[e].path+n}},template:function(t){var n=t.querySelector("configs"),r=n.querySelector("preloader");o.template.configs={preloader:{wait_animation_preload:r.getAttribute("wait_animation_preload"),backgroundColor:r.getAttribute("backgroundColor"),progressColor:r.getAttribute("progressColor"),totalSizeColor:r.getAttribute("totalSizeColor")}},o.template.asset={};for(var a=t.querySelectorAll("assets > asset"),i=0;i<a.length;i++){var s=a[i].getAttribute("id");"custom_javascript"===s?(o.template.asset[s]=o.template.asset[s]||[],o.template.asset[s].push({id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")})):o.template.asset[s]={id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")},"locale"===s&&(o.template.asset.localeFlash={id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")})}o.template.asset.localeHtml||(o.template.asset.localeHtml=o.template.asset.locale,o.template.asset.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml"),o.template.asset.css_html5&&o.template.asset.css_html5.url.indexOf("flash")!==-1&&(o.template.asset.css_html5={url:null}),o.template.get=function(e,t){return o.template.asset[e]?o.template.asset[e]:null},o.template.getConfig=function(e,t){return o.template.configs[e][t]}},locale:function(e){o.locale.messages=o.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)o.locale.messages[t[n].getAttribute("id")]=t[n].textContent;o.locale.get=function(e){return o.locale.messages[e]}},localeFlash:function(e){o.locale.messages=o.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)"undefined"==typeof o.locale.messages[t[n].getAttribute("id")]&&(o.locale.messages[t[n].getAttribute("id")]=t[n].textContent);for(var r=e.querySelectorAll("string"),a=0;a<r.length;a++)"undefined"==typeof o.locale.messages[r[a].getAttribute("name")]&&(o.locale.messages[r[a].getAttribute("name")]=r[a].textContent)},"common-ui":function(){function t(t){var n=!1,r=t.querySelector("menu_config");if(r){o["common-ui"].menu={left:[],center:[],right:[],burger:[]},o["common-ui"].menuViewControlItems=null;var a,i,s,l,c=["left","center","right","burger"],u=["default"];e.Param.isDesktop?u.push("desktop"):e.Param.isTablet?u.push("tablet"):u.push("mobile");var p=function(e){var t={};t.xmlElement=e,t.xmlString=e.outerHTML,void 0===t.xmlString&&(t.xmlString=(new XMLSerializer).serializeToString(e)),t.attributes={};for(var n=0;n<e.attributes.length;n++){var r=["label"],o=r.includes(e.attributes[n].name);o||(t.attributes[e.attributes[n].name]=e.attributes[n].value)}var a=e.querySelector("file");return a&&(t.file={image:a.getAttribute("url"),noMargin:a.getAttribute("noMargin"),url:a.getAttribute("href"),scale:a.getAttribute("scale")}),t},f=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;t.textContent="";try{t.textContent=e.textContent.trim()}catch(r){}return t},g=function(e){return Array.prototype.slice.call(e.querySelectorAll("element")).map(function(e){return"home"===e.getAttribute("name")&&(n=!0),p(e)})},m=function(e){return Array.prototype.slice.call(e.querySelectorAll("module")).map(function(e){return f(e)})},h=function(e,n,r,o,u){var f=e.querySelector("mode[name='"+n+"']");if(f){for(i in c)a=f.querySelector("menu[name='menu-"+c[i]+"']"),a&&(r[c[i]]=g(a));s=f.querySelector("panel_view_control"),s&&(o=p(s),o.children=g(s))}return l=t.querySelector("modules"),l&&(f=l.querySelector("mode[name='"+n+"']"),l&&f&&(u=m(f))),u},d={},v=null,b=[];for(i in c)d[c[i]]=[];for(var y in u)b=h(r,u[y],d,v,b);if(e.Main.urlManager.get("backHome")&&n===!1){var w=document.createElement("element");w.setAttribute("name","home"),d.right.push(p(w))}o["common-ui"].menu=d,o["common-ui"].panelViewControlItems=v,o["common-ui"].modules=b}}function r(t){o["common-ui"].assets={custom_css:[]};for(var n=t.querySelectorAll("template > asset"),r=0;r<n.length;r++){var a=n[r].getAttribute("name");"custom_javascript"===a||"custom_css"===a?(o["common-ui"].assets[a]=o["common-ui"].assets[a]||[],o["common-ui"].assets[a].push({name:a,url:n[r].getAttribute("url")})):o["common-ui"].assets[a]={name:a,url:n[r].getAttribute("url")},"locale"===a&&(o["common-ui"].assets.localeFlash={name:a,url:n[r].getAttribute("url")})}o["common-ui"].assets.localeHtml||(o["common-ui"].assets.localeHtml=o["common-ui"].assets.locale,o["common-ui"].assets.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml")}function a(e){o["common-ui"].services={};for(var t=e.querySelectorAll("services > service"),n=0;n<t.length;n++){var r=t[n].getAttribute("id");o["common-ui"].services[r]={};for(var a=0;a<t[n].attributes.length;a++){var i=t[n].attributes[a];o["common-ui"].services[r][i.name]=i.value}}}function i(t){var r=function(e,t,n){var r=o["common-ui"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},a=function(e){o["common-ui"].configs.deepLinking=!0;var t=e.querySelector("configs > deep_linking");t&&"true"!==t.getAttribute("value")&&(o["common-ui"].configs.deepLinking=!1)},i=function(t){o["common-ui"].configs.cookie={enabled:!0,url:void 0};var n=t.querySelector("configs > cookie");n&&(n.getAttribute("enabled")&&(o["common-ui"].configs.cookie.enabled="true"===n.getAttribute("enabled")),n.getAttribute("url")&&(o["common-ui"].configs.cookie.url=n.getAttribute("url")),n.getAttribute("gdpr")&&(o["common-ui"].configs.cookie.gdpr="true"===n.getAttribute("gdpr")),o["common-ui"].configs.cookie.services=e.Main.xmlManager.getConsentServices(n))},s=function(e){o["common-ui"].configs.dynamicPlaylist={enabled:!1};var t=e.querySelector("configs > dynamic_playlist");t&&(o["common-ui"].configs.dynamicPlaylist.enabled="true"===t.getAttribute("enabled"))},l=function(e){o["common-ui"].configs.ecoRating={enabled:!1};var t=e.querySelector("configs > eco_rating");t&&(o["common-ui"].configs.ecoRating.enabled="true"===t.getAttribute("enabled"),o["common-ui"].configs.ecoRating.disablePreload="true"===t.getAttribute("disable_preload"),o["common-ui"].configs.ecoRating.disableArrowKeys="true"===t.getAttribute("disable_arrow_keys"))},c=function(e){o["common-ui"].configs.tooltip={delay:300};var t=e.querySelector("configs > tooltip");t&&t.getAttribute("delay")&&(o["common-ui"].configs.tooltip.delay=~~t.getAttribute("delay"))},u=function(t){var n=t.querySelector("configs > page_layout");e.Main.pageLayoutService=new e.Class.PageLayoutService(n)},p=function(e){var t=e.querySelector("configs > pdf_html_font_max_load");t?o["common-ui"].configs.pdfHTMLMaxFontLoad=~~t.getAttribute("value")||0:o["common-ui"].configs.pdfHTMLMaxFontLoad=0},f=function(t){var n=t.querySelector("configs > viewer");e.Main.viewerService=new e.Class.ViewerService(n)},g=function(t){var n=t.querySelector("configs > thumbnails");e.Main.thumbnailsService=new e.Class.ThumbnailsService(n)},m=function(e){var t=e.querySelector("configs > links");o["common-ui"].configs.links={},t&&(o["common-ui"].configs.links.mode=t.getAttribute("mode"),t.hasAttribute("duration")&&(o["common-ui"].configs.links.duration=parseInt(t.getAttribute("duration"),10)))},h=function(e){o["common-ui"].configs.chapters=[];for(var t=e.querySelectorAll("configs > chapters > element"),n=0;n<t.length;n++){for(var r=t[n],a={},i=0;i<r.attributes.length;i++){var s=r.attributes[i];a[s.name]=s.value}o["common-ui"].configs.chapters.push(a);var l=e.querySelector("configs > chapters");l.hasAttribute("showChaptersInBurger")?o["common-ui"].configs.showChaptersInBurger=l.getAttribute("showChaptersInBurger"):o["common-ui"].configs.showChaptersInBurger=null,l.hasAttribute("useDropdownDesign")?o["common-ui"].configs.useDropdownDesign=l.getAttribute("useDropdownDesign"):o["common-ui"].configs.useDropdownDesign=null}},d=function(e){o["common-ui"].configs.thumbs_chapters=[];for(var t=e.querySelectorAll("configs > thumbs_chapters > element"),n=0;n<t.length;n++){for(var r=t[n],a={},i=0;i<r.attributes.length;i++){var s=r.attributes[i];a[s.name]=s.value}o["common-ui"].configs.thumbs_chapters.push(a)}},v=function(t){if(o["common-ui"].configs.transferring=t.querySelector("transferring"),o["common-ui"].configs.transferringVariable="transferring",o["common-ui"].configs.transferring){var r="transferring";return o["common-ui"].configs.transferring.hasAttribute("variable")&&(r=o["common-ui"].configs.transferring.getAttribute("variable")),o["common-ui"].configs.transferringVariable=r,n.transferring=e.Main.urlManager.get(r)||localStorage&&localStorage.getItem(r)||n[r],e.Main.transferring=new e.Class.TransferringManager,function(){return e.Main.transferring.execute(o["common-ui"].configs.transferring,n)}}return null};o["common-ui"].configs={},o["common-ui"].get=r,a(t),i(t),s(t),l(t),c(t),u(t),p(t),f(t),g(t),m(t),h(t),d(t);var b=v(t);return b}return function(e){var n=Promise.resolve();t(e),r(e),a(e);var o=i(e);return o&&n.then(o),n}}(),"common-configuration":function(t){var n=t.querySelector("contents");o["common-configuration"].config={pageCount:parseInt(n.getAttribute("pages_count"),10),shift:parseInt(n.getAttribute("shift"),10)},o["common-configuration"].contents={};for(var r=t.querySelectorAll("contents > content"),a=0;a<r.length;a++){var i=r[a].getAttribute("id");o["common-configuration"].contents[i]={id:i,width:parseInt(r[a].getAttribute("width")),height:parseInt(r[a].getAttribute("height")),path:this.resolver(r[a].getAttribute("path"))}}o["common-configuration"].get=function(e,t,n){var r=o["common-configuration"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))})},summary:function(t){o.summary.xml=t,o.summary.get=function(t,n){if("depth"===t){if(0===n)return[];var r=Array.apply(null,Array(n)).map(function(e,t){var n=Array.apply(null,Array(t+1)).map(String.prototype.valueOf,"it");return n.unshift("menu"),n.join(" > ")}),a=e.Main.xmlManager.get("summary","xml").querySelectorAll(r.join(", "));return Array.prototype.map.call(a,function(e){return{page:parseInt(e.getAttribute("p"),10),text:Array.prototype.map.call(e.childNodes,function(e){return"text"===e.nodeName?e.textContent:null}).filter(function(e){return null!==e})[0]}}).sort(function(e,t){return e.page-t.page})}if("xml"===t)return o.summary.xml}},statistics:function s(e){var s=e.querySelector("Statistics");o.statistics.version=parseInt(s.getAttribute("version")||"1",10),o.statistics.servers=s.querySelector("servers"),o.statistics.events=s.querySelector("events"),o.statistics.pages=s.querySelector("pages");var t=s.getAttribute("needConsent");null===t&&(t=!1),o.statistics.needConsent=!!t;var n=s.getAttribute("usePageNames");o.statistics.usePageNames="true"===n,o.statistics.get=function(e){return o.statistics[e]}},"combo-pages":function(e){var t=function(e){return parseInt(e.getAttribute("position"),10)},n=e.querySelectorAll('page[type="FILE"][fileType="PDF"]'),r=e.querySelectorAll('page[type="MOVIE"]'),a=[].concat(_toConsumableArray(r)).map(t);o.comboPages.pdfPageIndexes=[].concat(_toConsumableArray(n)).map(t),o.comboPages.scrollablePages=o.comboPages.pdfPageIndexes,o.comboPages.forcedSinglePages=[].concat(_toConsumableArray(o.comboPages.pdfPageIndexes),_toConsumableArray(a)),o.comboPages.get=function(e){return"scrollablePages"===e?o.comboPages.scrollablePages:"forcedSinglePages"===e?o.comboPages.forcedSinglePages:null}}};t.prototype.getVariable=function(e){return n[e]},t.prototype.getVariables=function(){return n},t.prototype.getConsentServices=function(e){var t=Array.prototype.slice.call(e.querySelectorAll("service"));return 0===t.length?["webpublicationStats"]:t.filter(function(e){return"true"===e.getAttribute("enabled")}).map(function(e){return e.getAttribute("name")})},t.prototype.get=function(t,n,r,o){if("common-ui"===t&&"configs"===n&&["viewer","thumbnails","pageLayout"].indexOf(r)>-1)return e.Main[r+"Service"].get(o);var a=this.getProxy(t,n,r,o);return"string"==typeof a?this.resolver(a):a},t.prototype.getProxy=function(e,t,n,r){return"config"===e&&"transferringVariable"===t?"transferring":"config"===e?!(!o.config.get&&"GAStatsEnabled"===t)&&o.config.get(t,n,r):"summary"===e?o.summary.get(t,n,r):"pubinfo"===e?o.pubinfo.get(t,n,r):"common-ui"===e&&"logo"===t?o[e].get&&o[e].get(t,n,r):"undefined"==typeof t?o[e]:o[e].get&&o[e].get(t,n,r)},t.prototype.getXml=function(e){if(r[e])return r[e]},t.prototype.resolver=function(){function e(e,t){return"undefined"!=typeof n[t]?n[t]:e}return function(t){return t?t.replace(/^~\//g,"publication/").replace(/\$([^\$]*)\$/g,e).replace(/\$\{([A-Za-z0-9-_]+)\}/gi,e):t}}(),t.prototype.parse=function(){function t(e){return function(t){var s=this,l=o(t);if(r[e]=l,i.call(this,l),"localeFlash"===e||"locale"===e){var c,u="name",p="string",f="Locale.";"locale"===e&&(u="id",p="message"),c=l.querySelectorAll(p),Array.prototype.forEach.call(c,function(e){var t=e.getAttribute(u),r=e.textContent;n[f+t]=s.resolver(r)});for(var g in n)n[g]=this.resolver(n[g])}var m=a[e].call(this,l);return m instanceof Promise?m:Promise.resolve(!0)}}function o(e){if(e.responseXML)return e.responseXML;var t=new DOMParser;return t.parseFromString(e.responseText,"text/xml")}function i(e){var t=e.getElementsByTagName("variables")[0];if(t){for(var r=t.childNodes,o=0;o<r.length;o++)s.call(this,r[o]);for(var a in n)n[a]=this.resolver(n[a])}}function s(e){if(1===e.nodeType&&e.getAttribute("value")){var t;t=e.getAttribute("id"),n[t]=this.resolver(e.getAttribute("value")),"root"===t&&(n.root="./publication/"),"media"===t&&location.href.indexOf("isApp")>-1&&(n.media=n.media.replace("assets/",""))}}return function(n,r){return e.Utils.promiseXHR("GET",r).then(t(n).bind(this))["catch"](function(e){console.warn(r,e)})}}(),t.prototype.setVariable=function(e,t){n[e]=t},e.Class.XmlManager=t}(webpublicationNamespace),function(e){"use strict";function t(){NIApi.register("stat.init",function(){var t=0,r=e.Main.xmlManager.get("statistics","servers");if(r){var o=r.childNodes;for(t=0;t<o.length;t++)o[t].tagName&&n(o[t])}var a=e.Main.xmlManager.get("statistics","events");if(a)for(a=a.children,t=0;t<a.length;t++)f[a[t].getAttribute("name")]={category:a[t].getAttribute("category"),action:a[t].getAttribute("action"),label:a[t].getAttribute("label")||a[t].getAttribute("title"),value:a[t].getAttribute("value")};else p=!0;var i=e.Main.xmlManager.get("statistics","pages");if(i)for(i=i.children,t=0;t<i.length;t++)u[i[t].getAttribute("name")]={url:i[t].getAttribute("url"),title:i[t].getAttribute("title")};else s=!0}),l=e.Main.xmlManager.get("statistics","usePageNames");var t=e.Main.xmlManager.get("statistics","needConsent"),r=e.Main.xmlManager.get("common-ui","configs","cookie"),o=r.enabled&&r.gdpr,a=t||o;!!a==!1&&NIApi.stat.init(),NIApi.register("stat.trackPage",function(e,t){return this.trackPage({name:e,variables:t}),Promise.resolve()}.bind(this)),NIApi.register("stat.trackEvent",function(e,t){return this.trackEvent({name:e,variables:t}),Promise.resolve()}.bind(this)),NIApi.register("stat.addTracker",function(e,t,n){return m[e][t]=n,Promise.resolve()}.bind(this)),NIApi.register("stat.trackCustomPage",function(e,t,n){return this.trackCustomPage({url:e,title:t,variables:n}),Promise.resolve()}.bind(this)),NIApi.register("stat.trackCustomEvent",function(e,t,n,r){return this.trackCustomEvent({category:e,action:t,label:n,variables:r}),Promise.resolve()}.bind(this))}function n(t){var n=g[t.tagName],r="modules/"+n+"/js/index.js";"undefined"==typeof n&&(n=t.tagName,r="js/"+n+"Tracker",e.addCustomTemplate("js","js/"+n+"Tracker.js","${template}html/js/modules/"+n+"Tracker.js")),e.require([r]).then(function(){i.push(new(e.Class[e.Utils.capitalize(n+"Tracker")])(t))})}function r(){for(var e=Array.prototype.slice.call(arguments),t=0;t<e.length;t++)if("undefined"!=typeof e[t])return e[t]}function o(e,t){if(e)for(var n in t)e=e.replace("${"+n+"}",t[n]);return e}var a="",i=[],s=!1,l=!1,c=[],u={},p=!1,f={},g={GoogleAnalytics:"analytics",GoogleTag:"googleTag",Matomo:"matomo",Piano:"piano",Piwik:"piwik",WebTrends:"webtrends",Xiti:"xiti"},m={page:{page:{url:"page=${1}",title:"${2}"},"old-page":{url:"page=${1}",title:"page ${1}"},"old-page-alt":{url:"page=${1}",title:"pages ${2}"},thumbnails:{url:"thumbnails",title:"page list"},search:{url:"search",title:"search panel"},"search-alt":{url:"search=${1}",title:'search for "${1}"'},pdf:{url:"pdf",title:"pdf generation"},print:{url:"print",title:"print"},contents:{url:"contents",title:"contents"},welcomepage:{url:"welcomepage",title:"welcome page"},share:{url:"share",title:"sharing"},"share-email":{url:"share=email",title:"email sharing"},favorites:{url:"favorites",title:"favorites list"},sharedby:{url:"sharedby",title:"shared by someone list"}},event:{pdfDownload:{action:"pdfDownload-${1}",label:"pdf download",category:"download"},pdfFullDownloadButton:{action:"pdfFullDownloadButton",label:"pdf full download",category:"download"},externalLink:{action:"externalLink",label:"external link to ${1}",category:"navigation"},videoPlay:{action:"videoPlay-${1}-${2}",label:"video play ${1} at ${2}",category:"enrichment"},videoPause:{action:"videoPause-${1}-${2}",label:"video pause ${1} at ${2}",category:"enrichment"},videoEnd:{action:"videoEnd-${1}",label:"video played ${1}",category:"enrichment"},shareMail:{action:"share-mail",label:"share by email",category:"share"},"shareMail-custom":{action:"share-${1}-mail",label:"share ${1} by email",category:"share"},"shareSocial-mail":{action:"share-Mail",label:"share on Mail",category:"share"},"shareSocial-print":{action:"share-Print",label:"share on Print",category:"share"},"shareSocial-download":{action:"share-Download",label:"share on Download",category:"share"},"shareSocial-facebook":{action:"share-Facebook",label:"share on Facebook",category:"share"},"shareSocial-twitter":{action:"share-X",label:"share on X",category:"share"},"shareSocial-linkedin":{action:"share-Linkedin",label:"share on Linkedin",category:"share"},"shareSocial-pinterest":{action:"share-Pinterest",label:"share on Pinterest",category:"share"},"shareSocial-tumblr":{action:"share-Tumblr",label:"share on Tumblr",category:"share"},"shareSocial-whatsapp":{action:"share-Whatsapp",label:"share on Whatsapp",category:"share"},"shareSocial-close":{action:"share-close",label:"share click close",category:"share"},"shareSocial-custom-mail":{action:"share-${1}-Mail",label:"share ${1} on Mail",category:"share"},"shareSocial-custom-print":{action:"share-${1}-Print",label:"share ${1} on Print",category:"share"},"shareSocial-custom-download":{action:"share-${1}-Download",label:"share ${1} on Download",category:"share"},"shareSocial-custom-facebook":{action:"share-${1}-Facebook",label:"share ${1} on Facebook",category:"share"},"shareSocial-custom-twitter":{action:"share-${1}-X",label:"share ${1} on X",category:"share"},"shareSocial-custom-linkedin":{action:"share-${1}-Linkedin",label:"share ${1} on Linkedin",category:"share"},"shareSocial-custom-pinterest":{action:"share-${1}-Pinterest",label:"share ${1} on Pinterest",category:"share"},"shareSocial-custom-tumblr":{action:"share-${1}-Tumblr",label:"share ${1} on Tumblr",category:"share"},"shareSocial-custom-whatsapp":{action:"share-${1}-Whatsapp",label:"share ${1} on Whatsapp",category:"share"},"shareSocial-custom-close":{action:"share-${1}-close",label:"share ${1} click close",category:"share"},print:{action:"print-${1}",label:"print",
category:"print"},bookmark:{action:"bookmark-${1}",label:"page ${1} bookmarked",category:"bookmark"},unbookmark:{action:"unbookmark-${1}",label:"page ${1} removed from bookmarks",category:"bookmark"},link:{action:"link-${1}-${2}",label:"enrichment click",category:"enrichment"},pageView:{action:"pageView-${1}",label:"page ${1} viewed",category:"navigation"},pageNext:{action:"pageNext-${1}",label:"next page of ${1}",category:"navigation"},pagePrev:{action:"pagePrev-${1}",label:"previous page of ${1}",category:"navigation"},pageFirst:{action:"pageFirst-${1}",label:"first page from ${1}",category:"navigation"},pageLast:{action:"pageLast-${1}",label:"last page from ${1}",category:"navigation"},lightboxOpen:{action:"lightboxOpen-${1}",label:"Opening lightbox ${1}",category:"lightbox"},lightboxClose:{action:"lightboxClose-${1}",label:"Closing lightbox ${1}",category:"lightbox"},zoomIn:{action:"zoomIn-${1}",label:"zoom in page ${1}",category:"navigation"},zoomOut:{action:"zoomOut-${1}",label:"zoom out page ${1}",category:"navigation"},fullScreenOn:{action:"fullScreenOn",label:"full screen activated",category:"navigation"},fullScreenOff:{action:"fullScreenOff",label:"full screen deactivated",category:"navigation"},menuOpen:{action:"menuOpen",label:"open the menu",category:"menu"},menuClose:{action:"menuClose",label:"close the menu",category:"menu"},chapter:{action:"chapters-${1}",label:"go to chapter ${1}",category:"navigation"}}};t.prototype.trackPage=function(t){var n=u[t.name],p=m.page[t.name];if("undefined"!=typeof t.name&&(s!==!1||"undefined"!=typeof n)&&t.url!==a){if(n=n||{},t.variables=t.variables||{},"page"===t.name){var f=t.variables[1];if(t.variables[1]=f.join("-"),l){var g=f.map(function(e){return c[e-1]});t.variables[2]=g.join(" and ")}else t.variables[2]=f.join(" and "),p=1===f.length?m.page["old-page"]:m.page["old-page-alt"]}t.url=r(n.url,t.url,p.url),t.url=location.pathname+location.search+"#"+t.url,t.title=r(n.title,t.title,p.title),t.url=o(t.url,t.variables),t.url=e.Utils.whitelistParameters(t.url),t.title=o(t.title,t.variables),this.dispatchToCustomTrackers(t,!0);for(var h=0;h<i.length;h++)i[h].trackPage(location.pathname,t.url,t.title);a=t.url}},t.prototype.trackEvent=function(e){var t=f[e.name],n=m.event[e.name]||{};if("undefined"!=typeof e.name&&(p!==!1||"undefined"!=typeof t)){t=t||{},e.variables=e.variables||{},e.category=r(t.category,e.category,n.category),e.action=r(t.action,e.action,n.action),e.label=r(t.label,e.label,n.label),e.value=r(t.value,e.value,n.value);var a=!!e.category;if(a){e.category=o(e.category,e.variables),e.action=o(e.action,e.variables),e.label=o(e.label,e.variables),e.value=o(e.value,e.variables),this.dispatchToCustomTrackers(e,!1);for(var s=0;s<i.length;s++)i[s].trackEvent(e.category,e.action,e.label,e.value)}}},t.prototype.dispatchToCustomTrackers=function(e,t){var n=t?"webpub-tracking-page":"webpub-tracking",r=new CustomEvent(n,{detail:e});window.dispatchEvent(r)},t.prototype.trackCustomPage=function(t){if(t.url!==a){e.Utils._assertString(t.url,"The page URL should be a string"),e.Utils._assertString(t.title,"The page title should be a string"),a=t.url,t.variables=t.variables||{},t.url=location.pathname+location.search+"#"+t.url,t.url=o(t.url,t.variables),t.url=e.Utils.whitelistParameters(t.url),t.title=o(t.title,t.variables);for(var n=0;n<i.length;n++)i[n].trackPage(location.pathname,t.url,t.title)}},t.prototype.trackCustomEvent=function(t){e.Utils._assertString(t.category,"The page URL should be a string"),e.Utils._assertString(t.action,"The page title should be a string"),e.Utils._assertString(t.label,"The page title should be a string"),t.variables=t.variables||{},t.category=o(t.category,t.variables),t.action=o(t.action,t.variables),t.label=o(t.label,t.variables),t.value=o(t.value,t.variables);for(var n=0;n<i.length;n++)i[n].trackEvent(t.category,t.action,t.label,t.value)},t.prototype.initPageTitles=function(e,t){return t?void(c=this.getPageTitlesFromChapters(e,t)):void(c=this.getPageTitlesDefault(e))},t.prototype.getPageTitlesFromChapters=function(e,t){var n=[],r=[],o=[],a=t[0],i="Home";1!==a.page&&t.splice(0,0,{name:i,page:1});for(var s=1,l=t[1],c=t[0],u=1;u<=e;u++){l&&u>=l.page&&(s++,l=t[s],c=t[s-1]);var p=1+u-c.page,f=p;n.push(c.name),r.push(f)}for(var g=0;g<e;g++){var m=r[g],h=n[g],d=r[g+1];o[g]=h,1===m&&2!==d||(o[g]+=" - "+m)}return o},t.prototype.getPageTitlesDefault=function(e){for(var t=[],n=0;n<e;n++)t[n]="Page "+(n+1);return t},e.Class.TrackerManager=t}(webpublicationNamespace),function(w){"use strict";function StartupManager(){}var data={reader:{type:"auto",mode:"3d"},ui:{paging:{mode:["bottom","lateral"],lateral:{hasPrevNext:!0,hasFirstLast:!0,display:"sticky"}},menu:{mode:["aside","topnav"]},carousel:{mode:["standard"]},zoom:{mode:["doubleclick","pinch"]},theme:{mode:["v4"]}},core:{session:"client",viewer:"v4",viewerDirection:"horizontal",mode:["canvas"],format:["img"]}};StartupManager.prototype._set=function(key,value){for(var splitedKey=key.split("."),finalKey="",i=0;i<splitedKey.length;i++)finalKey+=finalKey?"."+splitedKey[i]:splitedKey[i],eval("data."+finalKey+" = data."+finalKey+" || {};");eval("data."+key+'="'+value+'"')},StartupManager.prototype.start=function(){return w.Utils.promiseXHR("GET","publication/contents/templates/startup.json").then(function(e){return e.responseText&&(data=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(e){return console&&console.error&&console.error("Failed to load the startup.json. There is probably a syntax error. Message: "+e.toString()),Promise.resolve(!0)})},StartupManager.prototype.get=function(e){var t=null;if(0===e.indexOf("ui.")){var n=w.Param.userAgent.device.type,r=n.charAt(0).toUpperCase()+n.slice(1),o="ui"+r,a=this.get(e.replace(/^ui\./,o+"."));if(null!==a)return a}if("core.verticalArrow.position"===e){var i=this.get("core.verticalArrowPosition");if(i)return i}"core.verticalArrow.display"===e&&(t=["desktop","tablet"]);for(var s=e.split("."),l=data,c=0;c<s.length;c++){if("undefined"==typeof l[s[c]])return t;l=l[s[c]]}return l},StartupManager.prototype.has=function(e,t){var n=this.get(e);return n instanceof Array&&n.indexOf(t)>-1},w.Class.StartupManager=StartupManager}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(){}var n={pagesData:[]};t.prototype.start=function(){var r=e.Main.xmlManager.get("common-ui","assets","configs_json"),o=null;if(r&&(o=e.Utils.resolveVariable(r.url)),!o){var a=!e.Main.startupManager.has("core.format","epub-HTML");if(a)return Promise.resolve(!0);var i="publication/contents/media-epub/script/configs.json";o=i}return e.Utils.promiseXHR("GET",o).then(function(e){return e.responseText&&(n=t.prototype.merge(n,JSON.parse(e.responseText))),Promise.resolve(!0)})["catch"](function(e){return console&&console.error&&console.error("Failed to load the configs.json. There is probably a syntax error. Message: "+e.toString()),Promise.resolve(!0)})},t.prototype.get=function(e){for(var t=e.split("."),r=n,o=0;o<t.length;o++){if("undefined"==typeof r[t[o]])return null;r=r[t[o]]}return r},t.prototype.getFullPagesData=function(){var t=this.get("pagesData");if(!t)return null;var n=e.Main.playlistManager.isEnabled;if(!n)return t;var r=e.Main.playlistManager.getPageIndexes();return r.map(function(e){return t[e]})},t.prototype.getPagesData=function(e){var t=this.getFullPagesData();if(!t)return null;if(!e)return t;var n=t.map(function(t){var n={};return e.forEach(function(e){n[e]=t[e]}),n});return n},t.prototype.getPageData=function(e,n){var r=t.prototype.getPagesData(e);return r&&r[n]?r[n]:{}},t.prototype.has=function(e,t){var n=this.get(e);return n instanceof Array&&n.indexOf(t)>-1},t.prototype.convertFromPercentIfNeeded=function(e,t){var n=e.toLowerCase().endsWith("opacity"),r=n&&"string"==typeof t&&t.endsWith("%");return r?parseFloat(t)/100:t},t.prototype.merge=function(e,t){if(!t)return e;for(var n=JSON.parse(JSON.stringify(e)),r=Object.keys(t),o=0;o<r.length;o++){var a=r[o],i=t[a];if("object"!==("undefined"==typeof i?"undefined":_typeof(i)))n[a]=this.convertFromPercentIfNeeded(a,i);else{var s=Array.isArray(i)?[]:{};n[a]=this.merge(n[a]||s,i)}}return n},NIApi.register("configsJson.getPagesData",function(){return t.prototype.getPagesData()}),NIApi.register("configsJson.setPageData",function(e,r){var o=t.prototype.getPagesData(),a=o&&o[e]?o[e]:{};n.pagesData[e]=t.prototype.merge(a,r),document.dispatchEvent(new CustomEvent("configsJson.pageDataUpdated"))}),e.Class.ConfigsJsonManager=t}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(){e.Param.viewBody.setAttribute("touch-action","none"),e.Main.templateManager=new e.Class.TemplateManager,e.Param.isLocalReader="http:"!==location.protocol&&"https:"!==location.protocol;var t="file:"===location.protocol||"ms-local-stream:"===location.protocol||"ms-appx:"===location.protocol||"ms-appx-web:"===location.protocol;if(e.Param.isApp=t||e.Main.urlManager.get("isApp"),e.Param.isTouch="ontouchstart"in document.documentElement,this.setMode(),this.createSession(),e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&e.Param.userAgent.browser.version<11){var r=document.createElement("script");r.type="text/javascript",r.src="global_conf/jquery.js",r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||n.call(this)}.bind(this),document.getElementsByTagName("head")[0].appendChild(r)}else n.call(this)}var n=function(){if(e.Main.startupManager.get("reader.url.flash")&&"flash"===this.mode){var t;try{t=window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash")!==!1}catch(n){t=!1}var r="undefined"!=typeof navigator.plugins&&"object"==_typeof(navigator.plugins["Shockwave Flash"])||t;if(r)return void(location.href=e.Main.startupManager.get("reader.url.flash")+location.search+location.hash)}if("html"===this.mode){var o="reader.url.html"+e.Utils.capitalize(e.Param.userAgent.device.type),a="reader.url.html";if(e.Main.startupManager.get(o))return void(location.href=e.Main.startupManager.get(o)+location.search+location.hash);if(e.Main.startupManager.get(a))return void(location.href=e.Main.startupManager.get(a)+location.search+location.hash)}if(e.Main.templateManager.loadAppend(this.getBody(),e.Param.viewBody),e.Main.templateManager.loadAppend(this.getHead(),e.Param.viewHead),this.mobileSupported===!0)for(var i=document.querySelectorAll(".noflash-mobile"),s=0;s<i.length;s++)i[s].style.display="none"};t.prototype.mode="flash",t.prototype.getBody=function(){return"./global_conf/template/"+this.mode+"/body.html"},t.prototype.getHead=function(){return"./global_conf/template/"+this.mode+"/head.html"},t.prototype.createSession=function(){var t=e.Main.xmlManager.getVariable("client_id"),n=e.Main.xmlManager.getVariable("id"),r=e.Main.startupManager.get("core.session")||"single",o=e.Utils.getCookie("session_"+t),a=t+"_";o=o?o.split(";"):[],"single"===r&&(a=n+a);for(var i=0;i<o.length;i++)if(0===atob(o[i]).indexOf(a))return e.Param.sessionId=o[i],void(e.Param.sessionId=e.Param.sessionId.replace(/=/g,""));e.Param.sessionId=btoa(a+Math.random().toString().substring(2)),o.push(e.Param.sessionId),e.Param.sessionId=e.Param.sessionId.replace(/=/g,"")},t.prototype.setMode=function(t){"flash"===e.Main.urlManager.get("version")||"flash"===e.Main.startupManager.get("reader.type")?this.mode="flash":e.Main.urlManager.contains("forceMobile")===!0||"html"===e.Main.urlManager.get("version")||"true"===e.Main.urlManager.get("isApp")||"html"===e.Main.startupManager.get("reader.type")?this.mode="html":"undefined"==typeof t?e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.TABLET||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHONE||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHABLET?this.mode="html":this.mode="flash":this.mode=t,this.mobileSupported=!0,e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&(e.Param.userAgent.browser.version<=10||"unknown"===e.Param.userAgent.browser.version)&&(this.mode="flash",this.mobileSupported=!1)},t.prototype.rebuild=function(){return this.mode="html",n.call(this)},e.Class.Switcher=t}(webpublicationNamespace),function(e){e.Param.viewBody=document.body,e.Param.viewHead=document.getElementsByTagName("head")[0],e.Param.userAgent=new e.Class.UserAgentManager,e.Param.isDesktop=e.Param.userAgent.isDesktop(),e.Param.isPhone=e.Param.userAgent.isPhone(),e.Param.isTablet=e.Param.userAgent.isTablet(),e.Param.isPhablet=e.Param.userAgent.isPhablet(),e.Param.isUnknown=e.Param.userAgent.isUnknown(),e.Param.supportsPassive=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.Param.supportsPassive=!0}});window.addEventListener("test",null,t)}catch(n){}var r=function(t){var n=e.Main.xmlManager.parse("statistics",t);n.then(function(){2===e.Main.xmlManager.get("statistics","version")&&(e.Main.trackerManager=new e.Class.TrackerManager)})};return e.Main.startupManager=new e.Class.StartupManager,e.Main.startupManager.start().then(function(){e.Main.urlManager=new e.Class.UrlManager,e.Main.xmlManager=new e.Class.XmlManager;var t=Promise.resolve();t.then(function(){return e.Main.xmlManager.parse("common-configuration",e.Param.pathRoot+"contents/common-configuration.xml").then(function(){if("undefined"==typeof e.Main.xmlManager.getXml("common-configuration"))return console&&console.error&&console.error("No new conf file available, switching to the old model"),e.Main.startupManager._set("reader.configurationVersion",1),Promise.reject();var t=e.Main.xmlManager.getVariable("image_quality_folder_lq"),n=e.Main.xmlManager.getVariable("image_quality_folder_hq"),r=void 0;return r=t||n?t&&e.Param.isPhone?t:n:"image",e.Main.xmlManager.setVariable("image_quality_folder",r),e.Main.xmlManager.parse("common-ui",e.Param.pathRoot+"contents/templates/common-ui.xml")}).then(function(){return e.Main.configsJsonManager=new e.Class.ConfigsJsonManager,e.Main.configsJsonManager.start()}).then(function(){if(e.Main.xmlManager.getVariable("combo"))return e.Main.xmlManager.parse("combo-pages",e.Param.pathRoot+"contents/media-epub/combo-pages.xml")}).then(function(){e.Main.switcher=new e.Class.Switcher;var t=null;try{t=e.Main.xmlManager.getXml("common-ui").querySelector("template asset[id='statistics']").getAttribute("url")}catch(n){t=e.Main.xmlManager.get("common-configuration","contents","statistics","path")}null===t&&(t=e.Param.pathRoot+"contents/statistics.xml"),t=e.Utils.resolveVariable(t),r(t)})})["catch"](function(){e.Main.xmlManager.parse("pubinfo",e.Param.pathRoot+"contents/pubinfo.xml").then(function(){return e.Main.xmlManager.parse("contents",e.Main.xmlManager.get("pubinfo","contents"))}).then(function(){return e.Main.xmlManager.parse("template",e.Main.xmlManager.get("pubinfo","template"))}).then(function(){e.Main.switcher=new e.Class.Switcher;var t=null,n=e.Main.xmlManager.getXml("template"),o=n.querySelector("asset[id='statistics']");o&&(t=e.Utils.resolveVariable(o.getAttribute("url"))),t||(t=e.Main.xmlManager.get("pubinfo","statistics")),r(t)})})})}(webpublicationNamespace),function(e){"use strict";function t(){}var n={};t.prototype.fetch=function(){var t=e.Main.xmlManager.get("common-ui","assets","common_layout");if(!t)return Promise.resolve(!0);var r=e.Utils.resolveVariable(t.url?t.url:t);e.Utils.promiseXHR("GET",r).then(function(e){return e.responseText&&(n=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(){return Promise.resolve(!0)})},t.prototype.set=function(e,t){for(var r=e.split("."),o=n,a=0;a<r.length-1;a++)o.hasOwnProperty(r[a])||(o[r[a]]={}),o=o[r[a]];o[r[r.length-1]]=t},t.prototype.get=function(e){for(var t=e.split("."),r=n,o=0;o<t.length;o++){if("undefined"==typeof r[t[o]])return null;r=r[t[o]]}return r},e.Class.CommonLayout=t}(webpublicationNamespace),function(e){function t(){this.config={contentsDepth:0}}function n(e){if(e&&e.hasAttribute("contentsDepth")){var t=e.getAttribute("contentsDepth");this.config.contentsDepth=parseInt(t,10)}}function r(e){t.call(this),n.call(this,e)}var o={contentsDepth:function(){return this.config.contentsDepth}};r.prototype.get=function(e){return o[e].call(this)},r.prototype.set=function(e){for(var t in e)"contentsDepth"===t&&(this.config.contentsDepth=parseInt(e[t],10))},e.Class.ThumbnailsService=r}(webpublicationNamespace),function(e){function t(){return e.Param.isTablet?"tablet":e.Param.isPhone?"phone":e.Param.isDesktop?"desktop":void 0}function n(e){this.viewerConfig={device:t(),rotateClue:null,zoomClick:2,zoomMaxScale:2.5,padding:{portrait:{},landscape:{}}}}function r(t){if(null!==t){var n=this.viewerConfig.device,r=t.querySelector("mode[name="+n+"]");if(r){var o=r.querySelectorAll("padding");Array.prototype.forEach.call(o,function(t){for(var n=this.viewerConfig.padding,r=Object.keys(n.portrait).length>0,o=Object.keys(n.landscape).length>0,a=1;a<u.length;a++){var i=t.getAttribute(u[0]),s=i?i:t.getAttribute(u[a]),l="padding"+e.Utils.capitalize(u[a]);if(s)if(s=parseInt(s,10),t.hasAttribute("orientation")){var c=t.getAttribute("orientation");this.viewerConfig.padding[c][l]=s}else r===!1&&(this.viewerConfig.padding.portrait[l]=s),o===!1&&(this.viewerConfig.padding.landscape[l]=s)}}.bind(this))}}}function o(t){if(null!==t){t.hasAttribute("rotate_clue")&&e.Param.isDesktop===!1&&(this.viewerConfig.rotateClue=t.getAttribute("rotate_clue"));var n=this.viewerConfig.device,r=t.querySelector("mode[name="+n+"]");r&&r.hasAttribute("rotate_clue")&&(this.viewerConfig.rotateClue=r.getAttribute("rotate_clue"))}}function a(n){if(null!==n){var r=this.viewerConfig.device,o=n.querySelector("mode[name="+r+"] zoom");o=o||n.querySelector("mode[name=default] zoom"),o&&o.hasAttribute("clicks")&&(this.viewerConfig.zoomClick=parseInt(o.getAttribute("clicks"),10)),1===this.viewerConfig.zoomClick&&(e.Main.startupManager._set("ui.menu.topnav.display","sticky"),e.Main.startupManager._set("ui"+e.Utils.capitalize(t())+".menu.topnav.display","sticky")),o&&o.hasAttribute("max_scale")&&(this.viewerConfig.zoomMaxScale=o.getAttribute("max_scale"))}}function i(e){l.call(this,e,"page")}function s(e){l.call(this,e,"popup")}function l(e,t){var n=this;if(null!==e){var r=this.viewerConfig.device,o=e.querySelector("mode[name="+r+"] "+t);o=o||e.querySelector("mode[name=default] "+t),null!==o&&Array.prototype.forEach.call(o.attributes,function(e){n.viewerConfig[t+"_"+e.localName]=e.value})}}function c(e){n.call(this,e),r.call(this,e),o.call(this,e),a.call(this,e),i.call(this,e),s.call(this,e)}var u=["all","top","right","left","bottom"],p={paddingTop:0,paddingRight:0,paddingLeft:0,paddingBottom:0};c.prototype.get=function(t,n){return t=e.Utils.capitalize(t),this["get"+t](n)},c.prototype.getPadding=function(){var t={},n=e.Param.isPortrait?"portrait":"landscape";for(var r in p)t[r]=p[r];for(var o in this.viewerConfig.padding[n])t[o]=this.viewerConfig.padding[n][o];return t},c.prototype.getRotateClue=function(){return this.viewerConfig.rotateClue},c.prototype.getZoom=function(e){return"click"===e?this.viewerConfig.zoomClick:"max-scale"===e?this.viewerConfig.zoomMaxScale:null},c.prototype.getPage=function(e){return this.viewerConfig["page_"+e]},c.prototype.getPopup=function(e){return this.viewerConfig["popup_"+e]},c.prototype.set=function(e){for(var t in e)if(0===t.indexOf("padding")){var n=this.viewerConfig.padding;n.portrait[t]=n.portrait[t]||e[t],n.landscape[t]=n.landscape[t]||e[t]}else this.viewerConfig[t]=e[t]},e.Class.ViewerService=c}(webpublicationNamespace),function(e){function t(e){this.config={pageLayout:"auto",pagesOnFirstFrame:1}}function n(t){if(null!==t&&t.hasAttribute("first_frame")){var n=t.getAttribute("first_frame");e.Utils._assertInteger(n,"Page number must be an integer")&&(this.config.pagesOnFirstFrame=parseInt(n,10))}}function r(e){if(null!==e&&e.hasAttribute("value")){var t=e.getAttribute("value");this.config.pageLayout=""===t?"auto":t}}function o(e){t.call(this,e),n.call(this,e),r.call(this,e)}o.prototype.getPageLayout=function(){return this.config.pageLayout},o.prototype.getPagesOnFirstFrame=function(){return this.config.pagesOnFirstFrame},o.prototype.get=function(t){return t=e.Utils.capitalize(t),this["get"+t]()},o.prototype.set=function(e){for(var t in e)this.viewerConfig[t]=e[t]},e.Class.PageLayoutService=o}(webpublicationNamespace);
/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma=function(){return{x:0,y:0}},na=ma(),oa=ma(),pa=ma(),qa={},ra=0,sa={},ta=ma(),ua=0,va=!0,wa=[],xa={},ya=!1,za=function(a,b){e.extend(f,b.publicMethods),wa.push(a)},Aa=function(a){var b=ac();return a>b-1?a-b:a<0?b+a:a},Ba={},Ca=function(a,b){return Ba[a]||(Ba[a]=[]),Ba[a].push(b)},Da=function(a){var b=Ba[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Ea=function(){return(new Date).getTime()},Fa=function(a){ja=a,f.bg.style.opacity=a*i.bgOpacity},Ga=function(a,b,c,d,e){(!ya||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ha=function(a){ea&&(a&&(s>f.currItem.fitRatio?ya||(mc(f.currItem,!1,!0),ya=!0):ya&&(mc(f.currItem),ya=!1)),Ga(ea,pa.x,pa.y,s))},Ia=function(a){a.container&&Ga(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ja=function(a,b){b[E]=u+a+"px, 0px"+v},Ka=function(a,b){if(!i.loop&&b){var c=m+(ta.x*ra-a)/ta.x,d=Math.round(a-tb.x);(c<0&&d>0||c>=ac()-1&&d<0)&&(a=tb.x+d*i.mainScrollEndFriction)}tb.x=a,Ja(a,n)},La=function(a,b){var c=ub[a]-sa[a];return oa[a]+na[a]+c-c*(b/t)},Ma=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Na=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Oa=null,Pa=function(){Oa&&(e.unbind(document,"mousemove",Pa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Da("mouseUsed")),Oa=setTimeout(function(){Oa=null},100)},Qa=function(){e.bind(document,"keydown",f),N.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Pa),e.bind(window,"resize scroll orientationchange",f),Da("bindEvents")},Ra=function(){e.unbind(window,"resize scroll orientationchange",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Pa),N.transform&&e.unbind(f.scrollWrap,"click",f),V&&e.unbind(window,p,f),clearTimeout(O),Da("unbindEvents")},Sa=function(a,b){var c=ic(f.currItem,qa,a);return b&&(da=c),c},Ta=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ua=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Va=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=La(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Wa=function(){if(E){var b=N.perspective&&!G;return u="translate"+(b?"3d(":"("),void(v=N.perspective?", 0px)":")")}E="left",e.addClass(a,"pswp--ie"),Ja=function(a,b){b.left=a+"px"},Ia=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ha=function(){if(ea){var a=ea,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=pa.x+"px",a.top=pa.y+"px"}}},Xa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Ya=function(a){a&&(Y||X||fa||T)&&(a.preventDefault(),a.stopPropagation())},Za=function(){f.setScrollOffset(0,e.getScrollY())},$a={},_a=0,ab=function(a){$a[a]&&($a[a].raf&&I($a[a].raf),_a--,delete $a[a])},bb=function(a){$a[a]&&ab(a),$a[a]||(_a++,$a[a]={})},cb=function(){for(var a in $a)$a.hasOwnProperty(a)&&ab(a)},db=function(a,b,c,d,e,f,g){var h,i=Ea();bb(a);var j=function(){if($a[a]){if(h=Ea()-i,h>=d)return ab(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),$a[a].raf=H(j)}};j()},eb={shout:Da,listen:Ca,viewportSize:qa,options:i,isMainScrollAnimating:function(){return fa},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return V},isZooming:function(){return aa},setScrollOffset:function(a,b){sa.x=a,M=sa.y=b,Da("updateScrollOffset",sa)},applyZoomPan:function(a,b,c,d){pa.x=b,pa.y=c,s=a,Ha(d)},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",Wa(),r={resize:f.updateSize,orientationchange:function(){clearTimeout(O),O=setTimeout(function(){qa.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:Za,keydown:Xa,click:Ya};var d=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<wa.length;c++)f["init"+wa[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Da("firstUpdate"),m=m||i.index||0,(isNaN(m)||m<0||m>=ac())&&(m=0),f.currItem=_b(m),(N.isOldIOSPhone||N.isOldAndroid)&&(va=!1),a.setAttribute("aria-hidden","false"),i.modal&&(va?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Da("initialLayout"),M=K=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=G?"pswp--touch":"pswp--notouch",l+=N.animationName?" pswp--css_animation":"",l+=N.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ua=null,c=0;c<h;c++)Ja((c+o)*ta.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Ca("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Qa()}),f.setContent(y[1],m),f.updateCurrItem(),Da("afterInit"),va||(w=setInterval(function(){_a||V||aa||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Da("close"),Ra(),cc(f.currItem,null,!0,f.destroy))},destroy:function(){Da("destroy"),Xb&&clearTimeout(Xb),a.setAttribute("aria-hidden","true"),a.className=J,w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),zb(),cb(),Ba=null},panTo:function(a,b,c){c||(a>da.min.x?a=da.min.x:a<da.max.x&&(a=da.max.x),b>da.min.y?b=da.min.y:b<da.max.y&&(b=da.max.y)),pa.x=a,pa.y=b,Ha()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=Aa(a);var b=a-m;ua=b,m=a,f.currItem=_b(m),ra-=b,Ka(ta.x*ra),cb(),fa=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Da("beforeChange",0),y[1].el.children.length){var b=y[1].el.children[0];ea=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else ea=null;da=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,pa.x=da.center.x,pa.y=da.center.y,a&&Da("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;a<h;a++)y[a].item&&(y[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ua){var b,c=Math.abs(ua);if(!(a&&c<2)){f.currItem=_b(m),ya=!1,Da("beforeChange",ua),c>=h&&(o+=ua+(ua>0?-h:h),c=h);for(var d=0;d<c;d++)ua>0?(b=y.shift(),y[h-1]=b,o++,Ja((o+2)*ta.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Ja(o*ta.x,b.el.style),f.setContent(b,m+c-d-1-1));if(ea&&1===Math.abs(ua)){var e=_b(z);e.initialZoomLevel!==s&&(ic(e,qa),mc(e),Ia(e))}ua=0,f.updateCurrZoomItem(),z=m,Da("afterChange")}}},updateSize:function(b){if(!va&&i.modal){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&xa.x===window.innerWidth&&xa.y===window.innerHeight)return;xa.x=window.innerWidth,xa.y=window.innerHeight,a.style.height=xa.y+"px"}if(qa.x=f.scrollWrap.clientWidth,qa.y=f.scrollWrap.clientHeight,Za(),ta.x=qa.x+Math.round(qa.x*i.spacing),ta.y=qa.y,Ka(ta.x*ra),Da("beforeResize"),void 0!==o){for(var d,g,j,k=0;k<h;k++)d=y[k],Ja((k+o)*ta.x,d.el.style),j=m+k-1,i.loop&&ac()>2&&(j=Aa(j)),g=_b(j),g&&(x||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&j>=0&&f.setContent(d,j),g&&g.container&&(ic(g,qa),mc(g),Ia(g));x=!1}t=s=f.currItem.initialZoomLevel,da=f.currItem.bounds,da&&(pa.x=da.center.x,pa.y=da.center.y,Ha(!0)),Da("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,ub.x=Math.abs(b.x)-pa.x,ub.y=Math.abs(b.y)-pa.y,Ma(oa,pa));var g=Sa(a,!1),h={};Va("x",g,h,a),Va("y",g,h,a);var i=s,j={x:pa.x,y:pa.y};Na(h);var k=function(b){1===b?(s=a,pa.x=h.x,pa.y=h.y):(s=(a-i)*b+i,pa.x=(h.x-j.x)*b+j.x,pa.y=(h.y-j.y)*b+j.y),f&&f(b),Ha(1===b)};c?db("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},fb=30,gb=10,hb={},ib={},jb={},kb={},lb={},mb=[],nb={},ob=[],pb={},qb=0,rb=ma(),sb=0,tb=ma(),ub=ma(),vb=ma(),wb=function(a,b){return a.x===b.x&&a.y===b.y},xb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},yb=function(a,b){return pb.x=Math.abs(a.x-b.x),pb.y=Math.abs(a.y-b.y),Math.sqrt(pb.x*pb.x+pb.y*pb.y)},zb=function(){Z&&(I(Z),Z=null)},Ab=function(){V&&(Z=H(Ab),Qb())},Bb=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Cb=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:Cb(a.parentNode,b)))},Db={},Eb=function(a,b){return Db.prevent=!Cb(a.target,i.isClickableElement),Da("preventDragEvent",a,b,Db),Db.prevent},Fb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Gb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Hb=function(a,b,c){if(a-Q>50){var d=ob.length>2?ob.shift():{};d.x=b,d.y=c,ob.push(d),Q=a}},Ib=function(){var a=pa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(qa.y/2))},Jb={},Kb={},Lb=[],Mb=function(a){for(;Lb.length>0;)Lb.pop();return F?(la=0,mb.forEach(function(a){0===la?Lb[0]=a:1===la&&(Lb[1]=a),la++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Lb[0]=Fb(a.touches[0],Jb),a.touches.length>1&&(Lb[1]=Fb(a.touches[1],Kb))):(Jb.x=a.pageX,Jb.y=a.pageY,Jb.id="",Lb[0]=Jb),Lb},Nb=function(a,b){var c,d,e,g,h=0,j=pa[a]+b[a],k=b[a]>0,l=tb.x+b.x,m=tb.x-nb.x;return c=j>da.min[a]||j<da.max[a]?i.panEndFriction:1,j=pa[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(ea?"h"!==ga||"x"!==a||X||(k?(j>da.min[a]&&(c=i.panEndFriction,h=da.min[a]-j,d=da.min[a]-oa[a]),(d<=0||m<0)&&ac()>1?(g=l,m<0&&l>nb.x&&(g=nb.x)):da.min.x!==da.max.x&&(e=j)):(j<da.max[a]&&(c=i.panEndFriction,h=j-da.max[a],d=oa[a]-da.max[a]),(d<=0||m>0)&&ac()>1?(g=l,m>0&&l<nb.x&&(g=nb.x)):da.min.x!==da.max.x&&(e=j))):g=l,"x"!==a)?void(fa||$||s>f.currItem.fitRatio&&(pa[a]+=b[a]*c)):(void 0!==g&&(Ka(g,!0),$=g!==nb.x),da.min.x!==da.max.x&&(void 0!==e?pa.x=e:$||(pa.x+=b.x*c)),void 0!==g)},Ob=function(a){if(!("mousedown"===a.type&&a.button>0)){if($b)return void a.preventDefault();if(!U||"mousedown"!==a.type){if(Eb(a,!0)&&a.preventDefault(),Da("pointerDown"),F){var b=e.arraySearch(mb,a.pointerId,"id");b<0&&(b=mb.length),mb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Mb(a),d=c.length;_=null,cb(),V&&1!==d||(V=ha=!0,e.bind(window,p,f),S=ka=ia=T=$=Y=W=X=!1,ga=null,Da("firstTouchStart",c),Ma(oa,pa),na.x=na.y=0,Ma(kb,c[0]),Ma(lb,kb),nb.x=ta.x*ra,ob=[{x:kb.x,y:kb.y}],Q=P=Ea(),Sa(s,!0),zb(),Ab()),!aa&&d>1&&!fa&&!$&&(t=s,X=!1,aa=W=!0,na.y=na.x=0,Ma(oa,pa),Ma(hb,c[0]),Ma(ib,c[1]),Gb(hb,ib,vb),ub.x=Math.abs(vb.x)-pa.x,ub.y=Math.abs(vb.y)-pa.y,ba=ca=yb(hb,ib))}}},Pb=function(a){if(a.preventDefault(),F){var b=e.arraySearch(mb,a.pointerId,"id");if(b>-1){var c=mb[b];c.x=a.pageX,c.y=a.pageY}}if(V){var d=Mb(a);if(ga||Y||aa)_=d;else if(tb.x!==ta.x*ra)ga="h";else{var f=Math.abs(d[0].x-kb.x)-Math.abs(d[0].y-kb.y);Math.abs(f)>=gb&&(ga=f>0?"h":"v",_=d)}}},Qb=function(){if(_){var a=_.length;if(0!==a)if(Ma(hb,_[0]),jb.x=hb.x-kb.x,jb.y=hb.y-kb.y,aa&&a>1){if(kb.x=hb.x,kb.y=hb.y,!jb.x&&!jb.y&&wb(_[1],ib))return;Ma(ib,_[1]),X||(X=!0,Da("zoomGestureStarted"));var b=yb(hb,ib),c=Vb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ka=!0);var d=1,e=Ta(),g=Ua();if(c<e)if(i.pinchToClose&&!ka&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Fa(j),Da("onPinchClose",j),ia=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),ba=b,Gb(hb,ib,rb),na.x+=rb.x-vb.x,na.y+=rb.y-vb.y,Ma(vb,rb),pa.x=La("x",c),pa.y=La("y",c),S=c>s,s=c,Ha()}else{if(!ga)return;if(ha&&(ha=!1,Math.abs(jb.x)>=gb&&(jb.x-=_[0].x-lb.x),Math.abs(jb.y)>=gb&&(jb.y-=_[0].y-lb.y)),kb.x=hb.x,kb.y=hb.y,0===jb.x&&0===jb.y)return;if("v"===ga&&i.closeOnVerticalDrag&&!Bb()){na.y+=jb.y,pa.y+=jb.y;var k=Ib();return T=!0,Da("onVerticalDrag",k),Fa(k),void Ha()}Hb(Ea(),hb.x,hb.y),Y=!0,da=f.currItem.bounds;var l=Nb("x",jb);l||(Nb("y",jb),Na(pa),Ha())}}},Rb=function(a){if(N.isOldAndroid){if(U&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(U),U=setTimeout(function(){U=0},600))}Da("pointerUp"),Eb(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(mb,a.pointerId,"id");if(c>-1)if(b=mb.splice(c,1)[0],navigator.msPointerEnabled){var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}else b.type=a.pointerType||"mouse"}var g,h=Mb(a),j=h.length;if("mouseup"===a.type&&(j=0),2===j)return _=null,!0;1===j&&Ma(lb,h[0]),0!==j||ga||fa||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Da("touchRelease",a,b));var k=-1;if(0===j&&(V=!1,e.unbind(window,p,f),zb(),aa?k=0:sb!==-1&&(k=Ea()-sb)),sb=1===j?Ea():-1,g=k!==-1&&k<150?"zoom":"swipe",aa&&j<2&&(aa=!1,1===j&&(g="zoomPointerUp"),Da("zoomGestureEnded")),_=null,Y||X||fa||T)if(cb(),R||(R=Sb()),R.calculateSwipeSpeed("x"),T){var l=Ib();if(l<i.verticalDragRange)f.close();else{var m=pa.y,n=ja;db("verticalDrag",0,1,300,e.easing.cubic.out,function(a){pa.y=(f.currItem.initialPosition.y-m)*a+m,Fa((1-n)*a+n),Ha()}),Da("onVerticalDrag",1)}}else{if(($||fa)&&0===j){var o=Ub(g,R);if(o)return;g="zoomPointerUp"}if(!fa)return"swipe"!==g?void Wb():void(!$&&s>f.currItem.fitRatio&&Tb(R))}},Sb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){ob.length>1?(a=Ea()-Q+50,b=ob[ob.length-2][d]):(a=Ea()-P,b=lb[d]),c.lastFlickOffset[d]=kb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(pa[a]>da.min[a]?c.backAnimDestination[a]=da.min[a]:pa[a]<da.max[a]&&(c.backAnimDestination[a]=da.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,db("bounceZoomPan"+a,pa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){pa[a]=b,Ha()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,pa[a]+=c.distanceOffset[a])},panAnimLoop:function(){if($a.zoomPan&&($a.zoomPan.raf=H(c.panAnimLoop),c.now=Ea(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ha(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return pa.x=Math.round(pa.x),pa.y=Math.round(pa.y),Ha(),void ab("zoomPan")}};return c},Tb=function(a){return a.calculateSwipeSpeed("y"),da=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(bb("zoomPan"),a.lastNow=Ea(),void a.panAnimLoop())},Ub=function(a,b){var c;fa||(qb=m);var d;if("swipe"===a){var g=kb.x-lb.x,h=b.lastFlickDist.x<10;g>fb&&(h||b.lastFlickOffset.x>20)?d=-1:g<-fb&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,m<0?(m=i.loop?ac()-1:0,j=!0):m>=ac()&&(m=i.loop?0:ac()-1,j=!0),j&&!i.loop||(ua+=d,ra-=d,c=!0));var k,l=ta.x*ra,n=Math.abs(l-tb.x);return c||l>tb.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,qb===m&&(c=!1),fa=!0,Da("mainScrollAnimStart"),db("mainScroll",tb.x,l,k,e.easing.cubic.out,Ka,function(){cb(),fa=!1,qb=-1,(c||qb!==m)&&f.updateCurrItem(),Da("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Vb=function(a){return 1/ca*a*t},Wb=function(){var a=s,b=Ta(),c=Ua();s<b?a=b:s>c&&(a=c);var d,g=1,h=ja;return ia&&!S&&!ka&&s<b?(f.close(),!0):(ia&&(d=function(a){Fa((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};za("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.msPointerEnabled?a("MSPointer","Down","Move","Up","Cancel"):a("pointer","down","move","up","cancel"):N.touch?(a("touch","start","move","end","cancel"),G=!0):a("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,r[A]=Ob,r[B]=Pb,r[C]=Rb,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),G||(i.allowPanToNext=!1)}}});var Xb,Yb,Zb,$b,_b,ac,bc,cc=function(b,c,d,g){Xb&&clearTimeout(Xb),$b=!0,Zb=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){ab("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Fa(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Da("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),$b=!1};if(!j||!h||void 0===h.x)return Da("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,Ma(pa,b.initialPosition),Ha(),a.style.opacity=d?0:1,Fa(1),void(j?setTimeout(function(){k()},j):k());var n=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,pa.x=h.x,pa.y=h.y-K,f[g?"template":"bg"].style.opacity=.001,Ha()),bb("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Xb=setTimeout(function(){if(Da("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:pa.x,y:pa.y},l=s,m=ja,n=function(b){1===b?(s=f,pa.x=h.x,pa.y=h.y-M):(s=(f-l)*b+l,pa.x=(h.x-i.x)*b+i.x,pa.y=(h.y-M-i.y)*b+i.y),Ha(),g?a.style.opacity=1-b:Fa(m-b*m)};c?db("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Xb=setTimeout(k,j+20))}else s=b.initialZoomLevel,Ma(pa,b.initialPosition),Ha(),Fa(1),g?a.style.opacity=1:Fa(1),Xb=setTimeout(k,j+20)},d?25:90)};n()},dc={},ec=[],fc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yb.length}},gc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},hc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((dc.x-b)/2),d.center.y=Math.round((dc.y-c)/2)+a.vGap.top,d.max.x=b>dc.x?Math.round(dc.x-b):d.center.x,d.max.y=c>dc.y?Math.round(dc.y-c)+a.vGap.top:d.center.y,d.min.x=b>dc.x?0:d.center.x,d.min.y=c>dc.y?a.vGap.top:d.center.y},ic=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Da("parseVerticalMargin",a)),dc.x=b.x,dc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=dc.x/a.w,f=dc.y/a.h;a.fitRatio=e<f?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=gc())}if(!c)return;return hc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=gc(),a.initialPosition=a.bounds.center,a.bounds},jc=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,mc(b,d,b===f.currItem&&ya),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},kc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},lc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0},mc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},nc=function(){if(ec.length){for(var a,b=0;b<ec.length;b++)a=ec[b],a.holder.index===a.index&&jc(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);ec=[]}};za("Controller",{publicMethods:{lazyLoadItem:function(a){a=Aa(a);var b=_b(a);b&&(!b.loaded&&!b.loading||x)&&(Da("gettingData",a,b),b.src&&kc(b))},initController:function(){e.extend(i,fc,!0),f.items=Yb=c,_b=f.getItemAt,ac=i.getNumItemsFn,bc=i.loop,ac()<3&&(i.loop=!1),Ca("beforeChange",function(a){var b,c=i.preload,d=null===a||a>=0,e=Math.min(c[0],ac()),g=Math.min(c[1],ac());for(b=1;b<=(d?g:e);b++)f.lazyLoadItem(m+b);for(b=1;b<=(d?e:g);b++)f.lazyLoadItem(m-b)}),Ca("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Ca("mainScrollAnimComplete",nc),Ca("initialZoomInEnd",nc),Ca("destroy",function(){for(var a,b=0;b<Yb.length;b++)a=Yb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);ec=null})},getItemAt:function(a){return a>=0&&(void 0!==Yb[a]&&Yb[a])},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=Aa(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Da("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),lc(g),ic(g,qa),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,mc(g,d),jc(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(a&&a.index===b){if(lc(c,!0))return c.loadComplete=c.img=null,ic(c,qa),Ia(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!$b&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):N.transform&&(fa||$b)?ec.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):jc(b,c,h,c.img,fa||$b,!0)}c.loadComplete=null,c.img=null,Da("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),mc(g,l),h.appendChild(l),g.placeholder=l}g.loading||kc(g),f.allowProgressiveImg()&&(!Zb&&N.transform?ec.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):jc(b,g,h,g.img,!0,!0))}Zb||b!==m?Ia(g):(ea=h.style,cc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var oc,pc={},qc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};za("Tap",{publicMethods:{initTap:function(){Ca("firstTouchStart",f.onTapStart),Ca("touchRelease",f.onTapRelease),Ca("destroy",function(){pc={},oc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(oc),oc=null)},onTapRelease:function(a,b){if(b&&!Y&&!W&&!_a){var c=b;if(oc&&(clearTimeout(oc),oc=null,xb(c,pc)))return void Da("doubleTap",c);if("mouse"===b.type)return void qc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void qc(a,b);Ma(pc,c),oc=setTimeout(function(){qc(a,b),oc=null},300)}}}});var rc;za("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(G?Ca("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){rc={};var c="wheel mousewheel DOMMouseScroll";Ca("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Ca("unbindEvents",function(){rc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),s<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Ca("resize",g),Ca("afterChange",g),Ca("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Ca("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||_a||V?a.preventDefault():E&&Math.abs(a.deltaY)>2&&(l=!0,f.close())),!0;if(a.stopPropagation(),rc.x=0,"deltaX"in a)1===a.deltaMode?(rc.x=18*a.deltaX,rc.y=18*a.deltaY):(rc.x=a.deltaX,rc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(rc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?rc.y=-.16*a.wheelDeltaY:rc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;rc.y=a.detail}Sa(s,!0);var b=pa.x-rc.x,c=pa.y-rc.y;(i.modal||b<=da.min.x&&b>=da.max.x&&c<=da.min.y&&c>=da.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:qa.x/2+sa.x,y:qa.y/2+sa.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec={history:!0,galleryUID:1},Fc=function(){return Cc.hash.substring(1)},Gc=function(){sc&&clearTimeout(sc),uc&&clearTimeout(uc)},Hc=function(){var a=Fc(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Yb.length;c++)if(Yb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Ic=function(){if(uc&&clearTimeout(uc),_a||V)return void(uc=setTimeout(Ic,500));vc?clearTimeout(tc):vc=!0;var a=m+1,b=_b(m);b.hasOwnProperty("pid")&&(a=b.pid);var c=yc+"&gid="+i.galleryUID+"&pid="+a;zc||Cc.hash.indexOf(c)===-1&&(Bc=!0);var d=Cc.href.split("#")[0]+"#"+c;Dc?"#"+c!==window.location.hash&&history[zc?"replaceState":"pushState"]("",document.title,d):zc?Cc.replace(d):Cc.hash=c,zc=!0,tc=setTimeout(function(){vc=!1},60)};za("History",{publicMethods:{initHistory:function(){if(e.extend(i,Ec,!0),i.history){Cc=window.location,Bc=!1,Ac=!1,zc=!1,yc=Fc(),Dc="pushState"in history,yc.indexOf("gid=")>-1&&(yc=yc.split("&gid=")[0],yc=yc.split("?gid=")[0]),Ca("afterChange",f.updateURL),Ca("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){xc=!0,Ac||(Bc?history.back():yc?Cc.hash=yc:Dc?history.pushState("",document.title,Cc.pathname+Cc.search):Cc.hash=""),Gc()};Ca("unbindEvents",function(){l&&a()}),Ca("destroy",function(){xc||a()}),Ca("firstUpdate",function(){m=Hc().pid});var b=yc.indexOf("pid=");b>-1&&(yc=yc.substring(0,b),"&"===yc.slice(-1)&&(yc=yc.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Fc()===yc?(Ac=!0,void f.close()):void(vc||(wc=!0,f.goTo(Hc().pid),wc=!1))},updateURL:function(){Gc(),wc||(zc?sc=setTimeout(Ic,800):Ic())}}}),e.extend(f,eb)};return a});
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),!!c.href&&(!!c.hasAttribute("download")||(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1))},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){J++,2===J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&a<.95?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&b<.9?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;g<f;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a});